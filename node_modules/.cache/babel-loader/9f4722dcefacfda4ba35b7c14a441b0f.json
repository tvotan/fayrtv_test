{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tinvotan/Projects/fayrtv/fayr_test/fayrtv_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tinvotan/Projects/fayrtv/fayr_test/fayrtv_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/tinvotan/Projects/fayrtv/fayr_test/fayrtv_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tinvotan/Projects/fayrtv/fayr_test/fayrtv_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/tinvotan/Projects/fayrtv/fayr_test/fayrtv_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/tinvotan/Projects/fayrtv/fayr_test/fayrtv_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Modal,Header,Table,Button,Icon}from'semantic-ui-react';import{loadStripe}from'@stripe/stripe-js';import{SignInButton}from'../TopBar/TopBar';// Make sure to call `loadStripe` outside of a componentâ€™s render to avoid\n// recreating the `Stripe` object on every render.\nvar stripePromise=process.env.REACT_APP_STRIPE_PUBLIC_KEY?loadStripe(process.env.REACT_APP_STRIPE_PUBLIC_KEY):null;export var SubscribeModal=/*#__PURE__*/function(_React$Component){_inherits(SubscribeModal,_React$Component);var _super=_createSuper(SubscribeModal);function SubscribeModal(){var _this;_classCallCheck(this,SubscribeModal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.onSubscribe=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$props$user,_this$props$user2;var stripe,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(stripePromise){_context.next=3;break;}console.warn('Stripe integration is not configured, cannot subscribe');return _context.abrupt(\"return\");case 3:_context.next=5;return stripePromise;case 5:stripe=_context.sent;_context.next=8;return stripe===null||stripe===void 0?void 0:stripe.redirectToCheckout({lineItems:[{price:process.env.NODE_ENV==='development'?'price_HNGtabCzD5qyfd':'price_HNDBoPDI7yYRi9',quantity:1}],mode:'subscription',successUrl:window.location.href,cancelUrl:window.location.href,customerEmail:(_this$props$user=_this.props.user)===null||_this$props$user===void 0?void 0:_this$props$user.email,clientReferenceId:(_this$props$user2=_this.props.user)===null||_this$props$user2===void 0?void 0:_this$props$user2.uid});case 8:result=_context.sent;// If `redirectToCheckout` fails due to a browser or network\n// error, display the localized error message to your customer\n// using `error.message`.\nif(result&&result.error){console.error(result.error.message);}case 10:case\"end\":return _context.stop();}}},_callee);}));return _this;}_createClass(SubscribeModal,[{key:\"render\",value:function render(){if(this.props.isSubscriber){this.props.closeSubscribe();return null;}var closeSubscribe=this.props.closeSubscribe;return/*#__PURE__*/React.createElement(Modal,{open:true,onClose:closeSubscribe},/*#__PURE__*/React.createElement(Modal.Header,null,\"Subscribe to WatchParty Plus\"),/*#__PURE__*/React.createElement(Modal.Content,{image:true},/*#__PURE__*/React.createElement(Modal.Description,null,/*#__PURE__*/React.createElement(\"div\",null,\"Subscriptions help us maintain the service and build new features! Please consider supporting us if you're enjoying WatchParty.\"),/*#__PURE__*/React.createElement(Header,null,\"Features\"),/*#__PURE__*/React.createElement(Table,{definition:true,unstackable:true,striped:true},/*#__PURE__*/React.createElement(Table.Header,null,/*#__PURE__*/React.createElement(Table.Row,null,/*#__PURE__*/React.createElement(Table.HeaderCell,null),/*#__PURE__*/React.createElement(Table.HeaderCell,null,\"WatchParty Free\"),/*#__PURE__*/React.createElement(Table.HeaderCell,null,\"WatchParty Plus\"))),/*#__PURE__*/React.createElement(Table.Body,null,/*#__PURE__*/React.createElement(Table.Row,null,/*#__PURE__*/React.createElement(Table.Cell,null,\"Basic (Synchronized watching, chat, screenshare)\"),/*#__PURE__*/React.createElement(Table.Cell,null,/*#__PURE__*/React.createElement(Icon,{name:\"check\"})),/*#__PURE__*/React.createElement(Table.Cell,null,/*#__PURE__*/React.createElement(Icon,{name:\"check\"}))),/*#__PURE__*/React.createElement(Table.Row,null,/*#__PURE__*/React.createElement(Table.Cell,null,\"VBrowser Resolution\"),/*#__PURE__*/React.createElement(Table.Cell,null,\"720p\"),/*#__PURE__*/React.createElement(Table.Cell,null,\"1080p\")),/*#__PURE__*/React.createElement(Table.Row,null,/*#__PURE__*/React.createElement(Table.Cell,null,\"VBrowser CPU/RAM\"),/*#__PURE__*/React.createElement(Table.Cell,null,\"Standard\"),/*#__PURE__*/React.createElement(Table.Cell,null,\"Extra\")),/*#__PURE__*/React.createElement(Table.Row,null,/*#__PURE__*/React.createElement(Table.Cell,null,\"VBrowser Session Length\"),/*#__PURE__*/React.createElement(Table.Cell,null,\"3 hours\"),/*#__PURE__*/React.createElement(Table.Cell,null,\"12 hours\")),/*#__PURE__*/React.createElement(Table.Row,null,/*#__PURE__*/React.createElement(Table.Cell,null,\"Number of Permanent Rooms\"),/*#__PURE__*/React.createElement(Table.Cell,null,\"1\"),/*#__PURE__*/React.createElement(Table.Cell,null,\"10\")),/*#__PURE__*/React.createElement(Table.Row,null,/*#__PURE__*/React.createElement(Table.Cell,null,\"Custom Room URLs\"),/*#__PURE__*/React.createElement(Table.Cell,null),/*#__PURE__*/React.createElement(Table.Cell,null,/*#__PURE__*/React.createElement(Icon,{name:\"check\"}))),/*#__PURE__*/React.createElement(Table.Row,null,/*#__PURE__*/React.createElement(Table.Cell,null,\"Discord Subscriber Role\"),/*#__PURE__*/React.createElement(Table.Cell,null),/*#__PURE__*/React.createElement(Table.Cell,null,/*#__PURE__*/React.createElement(Icon,{name:\"check\"}))),/*#__PURE__*/React.createElement(Table.Row,null,/*#__PURE__*/React.createElement(Table.Cell,null,\"Price\"),/*#__PURE__*/React.createElement(Table.Cell,null,\"$0 / month\"),/*#__PURE__*/React.createElement(Table.Cell,null,\"$5 / month\")))),/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'right'}},this.props.user&&this.props.user.email?/*#__PURE__*/React.createElement(Button,{icon:true,labelPosition:\"left\",color:\"blue\",size:\"large\",onClick:this.onSubscribe},/*#__PURE__*/React.createElement(Icon,{name:\"cc stripe\"}),\"Subscribe with Stripe\"):/*#__PURE__*/React.createElement(\"div\",null,\"Please sign in to subscribe: \",/*#__PURE__*/React.createElement(SignInButton,{user:undefined}))))));}}]);return SubscribeModal;}(React.Component);","map":{"version":3,"sources":["/Users/tinvotan/Projects/fayrtv/fayr_test/fayrtv_test/src/components/Modal/SubscribeModal.tsx"],"names":["React","Modal","Header","Table","Button","Icon","loadStripe","SignInButton","stripePromise","process","env","REACT_APP_STRIPE_PUBLIC_KEY","SubscribeModal","onSubscribe","console","warn","stripe","redirectToCheckout","lineItems","price","NODE_ENV","quantity","mode","successUrl","window","location","href","cancelUrl","customerEmail","props","user","email","clientReferenceId","uid","result","error","message","isSubscriber","closeSubscribe","textAlign","undefined","Component"],"mappings":"q/BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,KAAT,CAAgBC,MAAhB,CAAwBC,KAAxB,CAA+BC,MAA/B,CAAuCC,IAAvC,KAAmD,mBAAnD,CACA,OAASC,UAAT,KAA2B,mBAA3B,CACA,OAASC,YAAT,KAA6B,kBAA7B,CAEA;AACA;AACA,GAAMC,CAAAA,aAAa,CAAGC,OAAO,CAACC,GAAR,CAAYC,2BAAZ,CAClBL,UAAU,CAACG,OAAO,CAACC,GAAR,CAAYC,2BAAb,CADQ,CAElB,IAFJ,CAIA,UAAaC,CAAAA,cAAb,uWAKEC,WALF,sEAKgB,+LACPL,aADO,yBAEVM,OAAO,CAACC,IAAR,CAAa,wDAAb,EAFU,8DAKSP,CAAAA,aALT,QAKNQ,MALM,qCAMSA,CAAAA,MANT,SAMSA,MANT,iBAMSA,MAAM,CAAEC,kBAAR,CAA2B,CAC9CC,SAAS,CAAE,CACT,CACEC,KAAK,CACHV,OAAO,CAACC,GAAR,CAAYU,QAAZ,GAAyB,aAAzB,CACI,sBADJ,CAEI,sBAJR,CAKEC,QAAQ,CAAE,CALZ,CADS,CADmC,CAU9CC,IAAI,CAAE,cAVwC,CAW9CC,UAAU,CAAEC,MAAM,CAACC,QAAP,CAAgBC,IAXkB,CAY9CC,SAAS,CAAEH,MAAM,CAACC,QAAP,CAAgBC,IAZmB,CAa9CE,aAAa,mBAAE,MAAKC,KAAL,CAAWC,IAAb,2CAAE,iBAAiBC,KAbc,CAc9CC,iBAAiB,oBAAE,MAAKH,KAAL,CAAWC,IAAb,4CAAE,kBAAiBG,GAdU,CAA3B,CANT,QAMNC,MANM,eAsBZ;AACA;AACA;AACA,GAAIA,MAAM,EAAIA,MAAM,CAACC,KAArB,CAA4B,CAC1BrB,OAAO,CAACqB,KAAR,CAAcD,MAAM,CAACC,KAAP,CAAaC,OAA3B,EACD,CA3BW,uDALhB,mFAkCW,CACP,GAAI,KAAKP,KAAL,CAAWQ,YAAf,CAA6B,CAC3B,KAAKR,KAAL,CAAWS,cAAX,GACA,MAAO,KAAP,CACD,CAJM,GAKCA,CAAAA,cALD,CAKoB,KAAKT,KALzB,CAKCS,cALD,CAMP,mBACE,oBAAC,KAAD,EAAO,IAAI,CAAE,IAAb,CAAmB,OAAO,CAAEA,cAA5B,eACE,oBAAC,KAAD,CAAO,MAAP,qCADF,cAEE,oBAAC,KAAD,CAAO,OAAP,EAAe,KAAK,KAApB,eAEE,oBAAC,KAAD,CAAO,WAAP,mBACE,iKADF,cAKE,oBAAC,MAAD,iBALF,cAME,oBAAC,KAAD,EAAO,UAAU,KAAjB,CAAkB,WAAW,KAA7B,CAA8B,OAAO,KAArC,eACE,oBAAC,KAAD,CAAO,MAAP,mBACE,oBAAC,KAAD,CAAO,GAAP,mBACE,oBAAC,KAAD,CAAO,UAAP,MADF,cAEE,oBAAC,KAAD,CAAO,UAAP,wBAFF,cAGE,oBAAC,KAAD,CAAO,UAAP,wBAHF,CADF,CADF,cASE,oBAAC,KAAD,CAAO,IAAP,mBAEE,oBAAC,KAAD,CAAO,GAAP,mBACE,oBAAC,KAAD,CAAO,IAAP,yDADF,cAIE,oBAAC,KAAD,CAAO,IAAP,mBACE,oBAAC,IAAD,EAAM,IAAI,CAAC,OAAX,EADF,CAJF,cAOE,oBAAC,KAAD,CAAO,IAAP,mBACE,oBAAC,IAAD,EAAM,IAAI,CAAC,OAAX,EADF,CAPF,CAFF,cAaE,oBAAC,KAAD,CAAO,GAAP,mBACE,oBAAC,KAAD,CAAO,IAAP,4BADF,cAEE,oBAAC,KAAD,CAAO,IAAP,aAFF,cAGE,oBAAC,KAAD,CAAO,IAAP,cAHF,CAbF,cAkBE,oBAAC,KAAD,CAAO,GAAP,mBACE,oBAAC,KAAD,CAAO,IAAP,yBADF,cAEE,oBAAC,KAAD,CAAO,IAAP,iBAFF,cAGE,oBAAC,KAAD,CAAO,IAAP,cAHF,CAlBF,cAuBE,oBAAC,KAAD,CAAO,GAAP,mBACE,oBAAC,KAAD,CAAO,IAAP,gCADF,cAEE,oBAAC,KAAD,CAAO,IAAP,gBAFF,cAGE,oBAAC,KAAD,CAAO,IAAP,iBAHF,CAvBF,cA4BE,oBAAC,KAAD,CAAO,GAAP,mBACE,oBAAC,KAAD,CAAO,IAAP,kCADF,cAEE,oBAAC,KAAD,CAAO,IAAP,UAFF,cAGE,oBAAC,KAAD,CAAO,IAAP,WAHF,CA5BF,cAiCE,oBAAC,KAAD,CAAO,GAAP,mBACE,oBAAC,KAAD,CAAO,IAAP,yBADF,cAEE,oBAAC,KAAD,CAAO,IAAP,MAFF,cAGE,oBAAC,KAAD,CAAO,IAAP,mBACE,oBAAC,IAAD,EAAM,IAAI,CAAC,OAAX,EADF,CAHF,CAjCF,cAwCE,oBAAC,KAAD,CAAO,GAAP,mBACE,oBAAC,KAAD,CAAO,IAAP,gCADF,cAEE,oBAAC,KAAD,CAAO,IAAP,MAFF,cAGE,oBAAC,KAAD,CAAO,IAAP,mBACE,oBAAC,IAAD,EAAM,IAAI,CAAC,OAAX,EADF,CAHF,CAxCF,cA+CE,oBAAC,KAAD,CAAO,GAAP,mBACE,oBAAC,KAAD,CAAO,IAAP,cADF,cAEE,oBAAC,KAAD,CAAO,IAAP,mBAFF,cAGE,oBAAC,KAAD,CAAO,IAAP,mBAHF,CA/CF,CATF,CANF,cAqEE,2BAAK,KAAK,CAAE,CAAEC,SAAS,CAAE,OAAb,CAAZ,EAEG,KAAKV,KAAL,CAAWC,IAAX,EAAmB,KAAKD,KAAL,CAAWC,IAAX,CAAgBC,KAAnC,cACC,oBAAC,MAAD,EACE,IAAI,KADN,CAEE,aAAa,CAAC,MAFhB,CAGE,KAAK,CAAC,MAHR,CAIE,IAAI,CAAC,OAJP,CAKE,OAAO,CAAE,KAAKlB,WALhB,eAOE,oBAAC,IAAD,EAAM,IAAI,CAAC,WAAX,EAPF,yBADD,cAYC,4EAC+B,oBAAC,YAAD,EAAc,IAAI,CAAE2B,SAApB,EAD/B,CAdJ,CArEF,CAFF,CAFF,CADF,CAiGD,CAzIH,4BAAoCxC,KAAK,CAACyC,SAA1C","sourcesContent":["import React from 'react';\nimport { Modal, Header, Table, Button, Icon } from 'semantic-ui-react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { SignInButton } from '../TopBar/TopBar';\n\n// Make sure to call `loadStripe` outside of a componentâ€™s render to avoid\n// recreating the `Stripe` object on every render.\nconst stripePromise = process.env.REACT_APP_STRIPE_PUBLIC_KEY\n  ? loadStripe(process.env.REACT_APP_STRIPE_PUBLIC_KEY as string)\n  : null;\n\nexport class SubscribeModal extends React.Component<{\n  closeSubscribe: Function;\n  user?: firebase.User;\n  isSubscriber: boolean;\n}> {\n  onSubscribe = async () => {\n    if (!stripePromise) {\n      console.warn('Stripe integration is not configured, cannot subscribe');\n      return;\n    }\n    const stripe = await stripePromise;\n    const result = await stripe?.redirectToCheckout({\n      lineItems: [\n        {\n          price:\n            process.env.NODE_ENV === 'development'\n              ? 'price_HNGtabCzD5qyfd'\n              : 'price_HNDBoPDI7yYRi9',\n          quantity: 1,\n        },\n      ] as any,\n      mode: 'subscription',\n      successUrl: window.location.href,\n      cancelUrl: window.location.href,\n      customerEmail: this.props.user?.email,\n      clientReferenceId: this.props.user?.uid,\n    } as any);\n    // If `redirectToCheckout` fails due to a browser or network\n    // error, display the localized error message to your customer\n    // using `error.message`.\n    if (result && result.error) {\n      console.error(result.error.message);\n    }\n  };\n  render() {\n    if (this.props.isSubscriber) {\n      this.props.closeSubscribe();\n      return null;\n    }\n    const { closeSubscribe } = this.props;\n    return (\n      <Modal open={true} onClose={closeSubscribe as any}>\n        <Modal.Header>Subscribe to WatchParty Plus</Modal.Header>\n        <Modal.Content image>\n          {/* <Image wrapped size='medium' src='https://react.semantic-ui.com/images/avatar/large/rachel.png' /> */}\n          <Modal.Description>\n            <div>\n              Subscriptions help us maintain the service and build new features!\n              Please consider supporting us if you're enjoying WatchParty.\n            </div>\n            <Header>Features</Header>\n            <Table definition unstackable striped>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell />\n                  <Table.HeaderCell>WatchParty Free</Table.HeaderCell>\n                  <Table.HeaderCell>WatchParty Plus</Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n\n              <Table.Body>\n                {/* Priority support */}\n                <Table.Row>\n                  <Table.Cell>\n                    Basic (Synchronized watching, chat, screenshare)\n                  </Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>VBrowser Resolution</Table.Cell>\n                  <Table.Cell>720p</Table.Cell>\n                  <Table.Cell>1080p</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>VBrowser CPU/RAM</Table.Cell>\n                  <Table.Cell>Standard</Table.Cell>\n                  <Table.Cell>Extra</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>VBrowser Session Length</Table.Cell>\n                  <Table.Cell>3 hours</Table.Cell>\n                  <Table.Cell>12 hours</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Number of Permanent Rooms</Table.Cell>\n                  <Table.Cell>1</Table.Cell>\n                  <Table.Cell>10</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Custom Room URLs</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Discord Subscriber Role</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Price</Table.Cell>\n                  <Table.Cell>$0 / month</Table.Cell>\n                  <Table.Cell>$5 / month</Table.Cell>\n                </Table.Row>\n              </Table.Body>\n            </Table>\n            <div style={{ textAlign: 'right' }}>\n              {/* if user isn't logged in, provide login prompt */}\n              {this.props.user && this.props.user.email ? (\n                <Button\n                  icon\n                  labelPosition=\"left\"\n                  color=\"blue\"\n                  size=\"large\"\n                  onClick={this.onSubscribe}\n                >\n                  <Icon name=\"cc stripe\" />\n                  Subscribe with Stripe\n                </Button>\n              ) : (\n                <div>\n                  Please sign in to subscribe: <SignInButton user={undefined} />\n                </div>\n              )}\n            </div>\n          </Modal.Description>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}