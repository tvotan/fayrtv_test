(this.webpackJsonpwatchparty=this.webpackJsonpwatchparty||[]).push([[0],{15:function(e,t,a){"use strict";a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"f",(function(){return m})),a.d(t,"i",(function(){return p})),a.d(t,"p",(function(){return h})),a.d(t,"b",(function(){return g})),a.d(t,"a",(function(){return v})),a.d(t,"g",(function(){return y})),a.d(t,"m",(function(){return w})),a.d(t,"l",(function(){return k})),a.d(t,"o",(function(){return E})),a.d(t,"h",(function(){return S})),a.d(t,"j",(function(){return x})),a.d(t,"k",(function(){return T})),a.d(t,"n",(function(){return j})),a.d(t,"e",(function(){return R}));var n=a(7),r=a.n(n),i=a(14),o=a(356),s=a(357),l=a(747);function c(e){if(null===e||void 0===e||!1===e||Number.isNaN(e)||e===1/0)return"";var t=Math.floor(Number(e)/3600),a=(Math.floor(Number(e)/60)%60).toString().padStart(2,"0"),n=Math.floor(Number(e)%60).toString().padStart(2,"0");return"".concat(t,":").concat(a,":").concat(n)}function u(e){return e>=1e6?(e/1e6).toFixed(2)+" MiB/s":e>=1e3?(e/1e3).toFixed(0)+" KiB/s":e+" B/s"}var d={};function m(e){return{red:"B03060",orange:"FE9A76",yellow:"FFD700",olive:"32CD32",green:"016936",teal:"008080",blue:"0E6EB8",violet:"EE82EE",purple:"B413EC",pink:"FF1493",brown:"A52A2A",grey:"A0A0A0",black:"000000"}[function(e){var t=["red","orange","yellow","olive","green","teal","blue","violet","purple","pink","brown","grey"];return d[e]||(d[e]=Math.abs(function(e){var t,a=0;for(t=0;t<e.length;t++)a=(a<<5)-a+e.charCodeAt(t),a|=0;return a}(e))%t.length),t[d[e]]}(e)]}var p=function(e){return e?e.startsWith("https://www.youtube.com/")||e.startsWith("https://youtu.be/")?"youtube":"video":""};function h(){return f.apply(this,arguments)}function f(){return(f=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.video();case 2:return t=e.sent,e.abrupt("return",t.result);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}function v(e,t,a){var n;return function(){var r=this,i=arguments,o=function(){n=null,a||e.apply(r,i)},s=a&&!n;clearTimeout(n),n=setTimeout(o,t),s&&e.apply(r,i)}}var b=function(e){if(e.startsWith("https://gitlab.com/")){var t=e.match(/https:\/\/gitlab.com\/api\/v4\/projects\/(.*)\/repository\/tree/),a=t&&t[1],n=decodeURIComponent(a||"");return"https://glcdn.githack.com/".concat(n,"/-/raw/master/")}return e+"/"},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"a0a0a0";return"https://ui-avatars.com/api/?name=".concat(e,"&background=").concat(t,"&size=256&color=ffffff")},w=function(){return window.screen.width<=600};var k=function(){return[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:212.47.251.184:3478",username:"username",credential:"password"},{urls:"turn:numb.viagenie.ca",credential:"watchparty",username:"howardzchung@gmail.com"}]},E=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SERVER_HOST||"".concat(window.location.protocol,"//").concat(window.location.hostname).concat("");function S(e,t){return C.apply(this,arguments)}function C(){return(C=Object(i.a)(r.a.mark((function e(t,a){var n,i,o,l,c,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch(t);case 2:if(n=e.sent,i=[],!t.includes("s3.")){e.next=15;break}return e.next=7,n.text();case 7:return o=e.sent,e.next=10,Object(s.parseStringPromise)(o);case 10:l=e.sent,c=l.ListBucketResult.Contents.filter((function(e){return!e.Key[0].includes("/")})),i=c.map((function(e){return{url:t+"/"+e.Key[0],name:t+"/"+e.Key[0]}})),e.next=19;break;case 15:return e.next=17,n.json();case 17:u=e.sent,i=u.filter((function(e){return"file"===e.type})).map((function(e){return{url:e.url||b(t)+e.name,name:b(t)+e.name}}));case 19:return i=i.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())})),e.abrupt("return",i);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return O.apply(this,arguments)}function O(){return(O=Object(i.a)(r.a.mark((function e(t,a){var n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch(t+"/search?q="+encodeURIComponent(a));case 2:return n=e.sent,e.next=5,n.json();case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return M.apply(this,arguments)}function M(){return(M=Object(i.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch(E+"/youtube?q="+encodeURIComponent(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return P.apply(this,arguments)}function P(){return(P=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a=document.createElement("input");a.type="file",t&&(a.accept=t),a.addEventListener("change",(function(){e(a.files)})),a.dispatchEvent(new MouseEvent("click"))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){var e=window.localStorage.getItem("watchparty-clientid");return e||(e=Object(l.a)(),window.localStorage.setItem("watchparty-clientid",e)),e}},402:function(e,t,a){e.exports=a(744)},403:function(e,t,a){},410:function(e,t,a){},43:function(e,t,a){e.exports={container:"Home_container__1ukFy",hero:"Home_hero__1zBE5",green:"Home_green__3PMJt",heroInner:"Home_heroInner__3w7l9",heroText:"Home_heroText__21xIv",subText:"Home_subText__363Kx",featureSection:"Home_featureSection__1E5B_",featureTitle:"Home_featureTitle__37GMX",featureText:"Home_featureText__2VOwD"}},461:function(e,t){},476:function(e,t){},478:function(e,t){},744:function(e,t,a){"use strict";a.r(t);a(403),a(404);var n=a(0),r=a.n(n),i=a(55),o=a.n(i),s=a(101),l=a(25),c=a(387),u=a(7),d=a.n(u),m=a(33),p=a(14),h=a(19),f=a(20),g=a(22),v=a(21),b=(a(410),a(158)),y=a.n(b),w=a(83),k=a.n(w),E=a(353),S=a.n(E),C=a(772),x=a(765),O=a(746),T=a(65),M=a(777),j=a(768),P=a(769),R=a(775),_=a(762),D=a(763),B=a(757),I=a(774),N=a(354),V=a.n(N),L=a(355),A=a(15);function z(e){return e.charAt(0).toUpperCase()+e.slice(1)}function U(e,t){return Math.floor(Math.random()*(t-e))+e}function W(){var e=["abandoned","able","absolute","adorable","adventurous","academic","acceptable","acclaimed","accomplished","accurate","aching","acidic","acrobatic","active","actual","adept","admirable","admired","adolescent","adorable","adored","advanced","afraid","affectionate","aged","aggravating","aggressive","agile","agitated","agonizing","agreeable","ajar","alarmed","alarming","alert","alienated","alive","all","altruistic","amazing","ambitious","ample","amused","amusing","anchored","ancient","angelic","angry","anguished","animated","annual","another","antique","anxious","any","apprehensive","appropriate","apt","arctic","arid","aromatic","artistic","ashamed","assured","astonishing","athletic","attached","attentive","attractive","austere","authentic","authorized","automatic","avaricious","average","aware","awesome","awful","awkward","babyish","bad","back","baggy","bare","barren","basic","beautiful","belated","beloved","beneficial","better","best","bewitched","big","big-hearted","biodegradable","bite-sized","bitter","black","black-and-white","bland","blank","blaring","bleak","blind","blissful","blond","blue","blushing","bogus","boiling","bold","bony","boring","bossy","both","bouncy","bountiful","bowed","brave","breakable","brief","bright","brilliant","brisk","broken","bronze","brown","bruised","bubbly","bulky","bumpy","buoyant","burdensome","burly","bustling","busy","buttery","buzzing","calculating","calm","candid","canine","capital","carefree","careful","careless","caring","cautious","cavernous","celebrated","charming","cheap","cheerful","cheery","chief","chilly","chubby","circular","classic","clean","clear","clear-cut","clever","close","closed","cloudy","clueless","clumsy","cluttered","coarse","cold","colorful","colorless","colossal","comfortable","common","compassionate","competent","complete","complex","complicated","composed","concerned","concrete","confused","conscious","considerate","constant","content","conventional","cooked","cool","cooperative","coordinated","corny","corrupt","costly","courageous","courteous","crafty","crazy","creamy","creative","creepy","criminal","crisp","critical","crooked","crowded","cruel","crushing","cuddly","cultivated","cultured","cumbersome","curly","curvy","cute","cylindrical","damaged","damp","dangerous","dapper","daring","darling","dark","dazzling","dead","deadly","deafening","dear","dearest","decent","decimal","decisive","deep","defenseless","defensive","defiant","deficient","definite","definitive","delayed","delectable","delicious","delightful","delirious","demanding","dense","dental","dependable","dependent","descriptive","deserted","detailed","determined","devoted","different","difficult","digital","diligent","dim","dimpled","dimwitted","direct","disastrous","discrete","disfigured","disgusting","disloyal","dismal","distant","downright","dreary","dirty","disguised","dishonest","dismal","distant","distinct","distorted","dizzy","dopey","doting","double","downright","drab","drafty","dramatic","dreary","droopy","dry","dual","dull","dutiful","each","eager","earnest","early","easy","easy-going","ecstatic","edible","educated","elaborate","elastic","elated","elderly","electric","elegant","elementary","elliptical","embarrassed","embellished","eminent","emotional","empty","enchanted","enchanting","energetic","enlightened","enormous","enraged","entire","envious","equal","equatorial","essential","esteemed","ethical","euphoric","even","evergreen","everlasting","every","evil","exalted","excellent","exemplary","exhausted","excitable","excited","exciting","exotic","expensive","experienced","expert","extraneous","extroverted","extra-large","extra-small","fabulous","failing","faint","fair","faithful","fake","false","familiar","famous","fancy","fantastic","far","faraway","far-flung","far-off","fast","fat","fatal","fatherly","favorable","favorite","fearful","fearless","feisty","feline","female","feminine","few","fickle","filthy","fine","finished","firm","first","firsthand","fitting","fixed","flaky","flamboyant","flashy","flat","flawed","flawless","flickering","flimsy","flippant","flowery","fluffy","fluid","flustered","focused","fond","foolhardy","foolish","forceful","forked","formal","forsaken","forthright","fortunate","fragrant","frail","frank","frayed","free","French","fresh","frequent","friendly","frightened","frightening","frigid","frilly","frizzy","frivolous","front","frosty","frozen","frugal","fruitful","full","fumbling","functional","funny","fussy","fuzzy","gargantuan","gaseous","general","generous","gentle","genuine","giant","giddy","gigantic","gifted","giving","glamorous","glaring","glass","gleaming","gleeful","glistening","glittering","gloomy","glorious","glossy","glum","golden","good","good-natured","gorgeous","graceful","gracious","grand","grandiose","granular","grateful","grave","gray","great","greedy","green","gregarious","grim","grimy","gripping","grizzled","gross","grotesque","grouchy","grounded","growing","growling","grown","grubby","gruesome","grumpy","guilty","gullible","gummy","hairy","half","handmade","handsome","handy","happy","happy-go-lucky","hard","hard-to-find","harmful","harmless","harmonious","harsh","hasty","hateful","haunting","healthy","heartfelt","hearty","heavenly","heavy","hefty","helpful","helpless","hidden","hideous","high","high-level","hilarious","hoarse","hollow","homely","honest","honorable","honored","hopeful","horrible","hospitable","hot","huge","humble","humiliating","humming","humongous","hungry","hurtful","husky","icky","icy","ideal","idealistic","identical","idle","idiotic","idolized","ignorant","ill","illegal","ill-fated","ill-informed","illiterate","illustrious","imaginary","imaginative","immaculate","immaterial","immediate","immense","impassioned","impeccable","impartial","imperfect","imperturbable","impish","impolite","important","impossible","impractical","impressionable","impressive","improbable","impure","inborn","incomparable","incompatible","incomplete","inconsequential","incredible","indelible","inexperienced","indolent","infamous","infantile","infatuated","inferior","infinite","informal","innocent","insecure","insidious","insignificant","insistent","instructive","insubstantial","intelligent","intent","intentional","interesting","internal","international","intrepid","ironclad","irresponsible","irritating","itchy","jaded","jagged","jam-packed","jaunty","jealous","jittery","joint","jolly","jovial","joyful","joyous","jubilant","judicious","juicy","jumbo","junior","jumpy","juvenile","kaleidoscopic","keen","key","kind","kindhearted","kindly","klutzy","knobby","knotty","knowledgeable","knowing","known","kooky","kosher","lame","lanky","large","last","lasting","late","lavish","lawful","lazy","leading","lean","leafy","left","legal","legitimate","light","lighthearted","likable","likely","limited","limp","limping","linear","lined","liquid","little","live","lively","livid","loathsome","lone","lonely","long","long-term","loose","lopsided","lost","loud","lovable","lovely","loving","low","loyal","lucky","lumbering","luminous","lumpy","lustrous","luxurious","mad","made-up","magnificent","majestic","major","male","mammoth","married","marvelous","masculine","massive","mature","meager","mealy","mean","measly","meaty","medical","mediocre","medium","meek","mellow","melodic","memorable","menacing","merry","messy","metallic","mild","milky","mindless","miniature","minor","minty","miserable","miserly","misguided","misty","mixed","modern","modest","moist","monstrous","monthly","monumental","moral","mortified","motherly","motionless","mountainous","muddy","muffled","multicolored","mundane","murky","mushy","musty","muted","mysterious","naive","narrow","nasty","natural","naughty","nautical","near","neat","necessary","needy","negative","neglected","negligible","neighboring","nervous","new","next","nice","nifty","nimble","nippy","nocturnal","noisy","nonstop","normal","notable","noted","noteworthy","novel","noxious","numb","nutritious","nutty","obedient","obese","oblong","oily","oblong","obvious","occasional","odd","oddball","offbeat","offensive","official","old","old-fashioned","only","open","optimal","optimistic","opulent","orange","orderly","organic","ornate","ornery","ordinary","original","other","our","outlying","outgoing","outlandish","outrageous","outstanding","oval","overcooked","overdue","overjoyed","overlooked","palatable","pale","paltry","parallel","parched","partial","passionate","past","pastel","peaceful","peppery","perfect","perfumed","periodic","perky","personal","pertinent","pesky","pessimistic","petty","phony","physical","piercing","pink","pitiful","plain","plaintive","plastic","playful","pleasant","pleased","pleasing","plump","plush","polished","polite","political","pointed","pointless","poised","poor","popular","portly","posh","positive","possible","potable","powerful","powerless","practical","precious","present","prestigious","pretty","precious","previous","pricey","prickly","primary","prime","pristine","private","prize","probable","productive","profitable","profuse","proper","proud","prudent","punctual","pungent","puny","pure","purple","pushy","putrid","puzzled","puzzling","quaint","qualified","quarrelsome","quarterly","queasy","querulous","questionable","quick","quick-witted","quiet","quintessential","quirky","quixotic","quizzical","radiant","ragged","rapid","rare","rash","raw","recent","reckless","rectangular","ready","real","realistic","reasonable","red","reflecting","regal","regular","reliable","relieved","remarkable","remorseful","remote","repentant","required","respectful","responsible","repulsive","revolving","rewarding","rich","rigid","right","ringed","ripe","roasted","robust","rosy","rotating","rotten","rough","round","rowdy","royal","rubbery","rundown","ruddy","rude","runny","rural","rusty","sad","safe","salty","same","sandy","sane","sarcastic","sardonic","satisfied","scaly","scarce","scared","scary","scented","scholarly","scientific","scornful","scratchy","scrawny","second","secondary","second-hand","secret","self-assured","self-reliant","selfish","sentimental","separate","serene","serious","serpentine","several","severe","shabby","shadowy","shady","shallow","shameful","shameless","sharp","shimmering","shiny","shocked","shocking","shoddy","short","short-term","showy","shrill","shy","sick","silent","silky","silly","silver","similar","simple","simplistic","sinful","single","sizzling","skeletal","skinny","sleepy","slight","slim","slimy","slippery","slow","slushy","small","smart","smoggy","smooth","smug","snappy","snarling","sneaky","sniveling","snoopy","sociable","soft","soggy","solid","somber","some","spherical","sophisticated","sore","sorrowful","soulful","soupy","sour","Spanish","sparkling","sparse","specific","spectacular","speedy","spicy","spiffy","spirited","spiteful","splendid","spotless","spotted","spry","square","squeaky","squiggly","stable","staid","stained","stale","standard","starchy","stark","starry","steep","sticky","stiff","stimulating","stingy","stormy","straight","strange","steel","strict","strident","striking","striped","strong","studious","stunning","stupendous","stupid","sturdy","stylish","subdued","submissive","substantial","subtle","suburban","sudden","sugary","sunny","super","superb","superficial","superior","supportive","sure-footed","surprised","suspicious","svelte","sweaty","sweet","sweltering","swift","sympathetic","tall","talkative","tame","tan","tangible","tart","tasty","tattered","taut","tedious","teeming","tempting","tender","tense","tepid","terrible","terrific","testy","thankful","that","these","thick","thin","third","thirsty","this","thorough","thorny","those","thoughtful","threadbare","thrifty","thunderous","tidy","tight","timely","tinted","tiny","tired","torn","total","tough","traumatic","treasured","tremendous","tragic","trained","tremendous","triangular","tricky","trifling","trim","trivial","troubled","true","trusting","trustworthy","trusty","truthful","tubby","turbulent","twin","ugly","ultimate","unacceptable","unaware","uncomfortable","uncommon","unconscious","understated","unequaled","uneven","unfinished","unfit","unfolded","unfortunate","unhappy","unhealthy","uniform","unimportant","unique","united","unkempt","unknown","unlawful","unlined","unlucky","unnatural","unpleasant","unrealistic","unripe","unruly","unselfish","unsightly","unsteady","unsung","untidy","untimely","untried","untrue","unused","unusual","unwelcome","unwieldy","unwilling","unwitting","unwritten","upbeat","upright","upset","urban","usable","used","useful","useless","utilized","utter","vacant","vague","vain","valid","valuable","vapid","variable","vast","velvety","venerated","vengeful","verifiable","vibrant","vicious","victorious","vigilant","vigorous","villainous","violet","violent","virtual","virtuous","visible","vital","vivacious","vivid","voluminous","wan","warlike","warm","warmhearted","warped","wary","wasteful","watchful","waterlogged","watery","wavy","wealthy","weak","weary","webbed","wee","weekly","weepy","weighty","weird","welcome","well-documented","well-groomed","well-informed","well-lit","well-made","well-off","well-to-do","well-worn","wet","which","whimsical","whirlwind","whispered","white","whole","whopping","wicked","wide","wide-eyed","wiggly","wild","willing","wilted","winding","windy","winged","wiry","wise","witty","wobbly","woeful","wonderful","wooden","woozy","wordy","worldly","worn","worried","worrisome","worse","worst","worthless","worthwhile","worthy","wrathful","wretched","writhing","wrong","wry","yawning","yearly","yellow","yellowish","young","youthful","yummy","zany","zealous","zesty","zigzag","rocky"],t=["people","history","way","art","world","information","map","family","government","health","system","computer","meat","year","thanks","music","person","reading","method","data","food","understanding","theory","law","bird","literature","problem","software","control","knowledge","power","ability","economics","love","internet","television","science","library","nature","fact","product","idea","temperature","investment","area","society","activity","story","industry","media","thing","oven","community","definition","safety","quality","development","language","management","player","variety","video","week","security","country","exam","movie","organization","equipment","physics","analysis","policy","series","thought","basis","boyfriend","direction","strategy","technology","army","camera","freedom","paper","environment","child","instance","month","truth","marketing","university","writing","article","department","difference","goal","news","audience","fishing","growth","income","marriage","user","combination","failure","meaning","medicine","philosophy","teacher","communication","night","chemistry","disease","disk","energy","nation","road","role","soup","advertising","location","success","addition","apartment","education","math","moment","painting","politics","attention","decision","event","property","shopping","student","wood","competition","distribution","entertainment","office","population","president","unit","category","cigarette","context","introduction","opportunity","performance","driver","flight","length","magazine","newspaper","relationship","teaching","cell","dealer","debate","finding","lake","member","message","phone","scene","appearance","association","concept","customer","death","discussion","housing","inflation","insurance","mood","woman","advice","blood","effort","expression","importance","opinion","payment","reality","responsibility","situation","skill","statement","wealth","application","city","county","depth","estate","foundation","grandmother","heart","perspective","photo","recipe","studio","topic","collection","depression","imagination","passion","percentage","resource","setting","ad","agency","college","connection","criticism","debt","description","memory","patience","secretary","solution","administration","aspect","attitude","director","personality","psychology","recommendation","response","selection","storage","version","alcohol","argument","complaint","contract","emphasis","highway","loss","membership","possession","preparation","steak","union","agreement","cancer","currency","employment","engineering","entry","interaction","limit","mixture","preference","region","republic","seat","tradition","virus","actor","classroom","delivery","device","difficulty","drama","election","engine","football","guidance","hotel","match","owner","priority","protection","suggestion","tension","variation","anxiety","atmosphere","awareness","bread","climate","comparison","confusion","construction","elevator","emotion","employee","employer","guest","height","leadership","mall","manager","operation","recording","respect","sample","transportation","boring","charity","cousin","disaster","editor","efficiency","excitement","extent","feedback","guitar","homework","leader","mom","outcome","permission","presentation","promotion","reflection","refrigerator","resolution","revenue","session","singer","tennis","basket","bonus","cabinet","childhood","church","clothes","coffee","dinner","drawing","hair","hearing","initiative","judgment","lab","measurement","mode","mud","orange","poetry","police","possibility","procedure","queen","ratio","relation","restaurant","satisfaction","sector","signature","significance","song","tooth","town","vehicle","volume","wife","accident","airport","appointment","arrival","assumption","baseball","chapter","committee","conversation","database","enthusiasm","error","explanation","farmer","gate","girl","hall","historian","hospital","injury","instruction","maintenance","manufacturer","meal","perception","pie","poem","presence","proposal","reception","replacement","revolution","river","son","speech","tea","village","warning","winner","worker","writer","assistance","breath","buyer","chest","chocolate","conclusion","contribution","cookie","courage","desk","drawer","establishment","examination","garbage","grocery","honey","impression","improvement","independence","insect","inspection","inspector","king","ladder","menu","penalty","piano","potato","profession","professor","quantity","reaction","requirement","salad","sister","supermarket","tongue","weakness","wedding","affair","ambition","analyst","apple","assignment","assistant","bathroom","bedroom","beer","birthday","celebration","championship","cheek","client","consequence","departure","diamond","dirt","ear","fortune","friendship","funeral","gene","girlfriend","hat","indication","intention","lady","midnight","negotiation","obligation","passenger","pizza","platform","poet","pollution","recognition","reputation","shirt","speaker","stranger","surgery","sympathy","tale","throat","trainer","uncle","youth","time","work","film","water","money","example","while","business","study","game","life","form","air","day","place","number","part","field","fish","back","process","heat","hand","experience","job","book","end","point","type","home","economy","value","body","market","guide","interest","state","radio","course","company","price","size","card","list","mind","trade","line","care","group","risk","word","fat","force","key","light","training","name","school","top","amount","level","order","practice","research","sense","service","piece","web","boss","sport","fun","house","page","term","test","answer","sound","focus","matter","kind","soil","board","oil","picture","access","garden","range","rate","reason","future","site","demand","exercise","image","case","cause","coast","action","age","bad","boat","record","result","section","building","mouse","cash","class","period","plan","store","tax","side","subject","space","rule","stock","weather","chance","figure","man","model","source","beginning","earth","program","chicken","design","feature","head","material","purpose","question","rock","salt","act","birth","car","dog","object","scale","sun","note","profit","rent","speed","style","war","bank","craft","half","inside","outside","standard","bus","exchange","eye","fire","position","pressure","stress","advantage","benefit","box","frame","issue","step","cycle","face","item","metal","paint","review","room","screen","structure","view","account","ball","discipline","medium","share","balance","bit","black","bottom","choice","gift","impact","machine","shape","tool","wind","address","average","career","culture","morning","pot","sign","table","task","condition","contact","credit","egg","hope","ice","network","north","square","attempt","date","effect","link","post","star","voice","capital","challenge","friend","self","shot","brush","couple","exit","front","function","lack","living","plant","plastic","spot","summer","taste","theme","track","wing","brain","button","click","desire","foot","gas","influence","notice","rain","wall","base","damage","distance","feeling","pair","savings","staff","sugar","target","text","animal","author","budget","discount","file","ground","lesson","minute","officer","phase","reference","register","sky","stage","stick","title","trouble","bowl","bridge","campaign","character","club","edge","evidence","fan","letter","lock","maximum","novel","option","pack","park","quarter","skin","sort","weight","baby","background","carry","dish","factor","fruit","glass","joint","master","muscle","red","strength","traffic","trip","vegetable","appeal","chart","gear","ideal","kitchen","land","log","mother","net","party","principle","relative","sale","season","signal","spirit","street","tree","wave","belt","bench","commission","copy","drop","minimum","path","progress","project","sea","south","status","stuff","ticket","tour","angle","blue","breakfast","confidence","daughter","degree","doctor","dot","dream","duty","essay","father","fee","finance","hour","juice","luck","milk","mouth","peace","pipe","stable","storm","substance","team","trick","afternoon","bat","beach","blank","catch","chain","consideration","cream","crew","detail","gold","interview","kid","mark","mission","pain","pleasure","score","screw","sex","shop","shower","suit","tone","window","agent","band","bath","block","bone","calendar","candidate","cap","coat","contest","corner","court","cup","district","door","east","finger","garage","guarantee","hole","hook","implement","layer","lecture","lie","manner","meeting","nose","parking","partner","profile","rice","routine","schedule","swimming","telephone","tip","winter","airline","bag","battle","bed","bill","bother","cake","code","curve","designer","dimension","dress","ease","emergency","evening","extension","farm","fight","gap","grade","holiday","horror","horse","host","husband","loan","mistake","mountain","nail","noise","occasion","package","patient","pause","phrase","proof","race","relief","sand","sentence","shoulder","smoke","stomach","string","tourist","towel","vacation","west","wheel","wine","arm","aside","associate","bet","blow","border","branch","breast","brother","buddy","bunch","chip","coach","cross","document","draft","dust","expert","floor","god","golf","habit","iron","judge","knife","landscape","league","mail","mess","native","opening","parent","pattern","pin","pool","pound","request","salary","shame","shelter","shoe","silver","tackle","tank","trust","assist","bake","bar","bell","bike","blame","boy","brick","chair","closet","clue","collar","comment","conference","devil","diet","fear","fuel","glove","jacket","lunch","monitor","mortgage","nurse","pace","panic","peak","plane","reward","row","sandwich","shock","spite","spray","surprise","till","transition","weekend","welcome","yard","alarm","bend","bicycle","bite","blind","bottle","cable","candle","clerk","cloud","concert","counter","flower","grandfather","harm","knee","lawyer","leather","load","mirror","neck","pension","plate","purple","ruin","ship","skirt","slice","snow","specialist","stroke","switch","trash","tune","zone","anger","award","bid","bitter","boot","bug","camp","candy","carpet","cat","champion","channel","clock","comfort","cow","crack","engineer","entrance","fault","grass","guy","hell","highlight","incident","island","joke","jury","leg","lip","mate","motor","nerve","passage","pen","pride","priest","prize","promise","resident","resort","ring","roof","rope","sail","scheme","script","sock","station","toe","tower","truck","witness","can","will","other","use","make","good","look","help","go","great","being","still","public","read","keep","start","give","human","local","general","specific","long","play","feel","high","put","common","set","change","simple","past","big","possible","particular","major","personal","current","national","cut","natural","physical","show","try","check","second","call","move","pay","let","increase","single","individual","turn","ask","buy","guard","hold","main","offer","potential","professional","international","travel","cook","alternative","special","working","whole","dance","excuse","cold","commercial","low","purchase","deal","primary","worth","fall","necessary","positive","produce","search","present","spend","talk","creative","tell","cost","drive","green","support","glad","remove","return","run","complex","due","effective","middle","regular","reserve","independent","leave","original","reach","rest","serve","watch","beautiful","charge","active","break","negative","safe","stay","visit","visual","affect","cover","report","rise","walk","white","junior","pick","unique","classic","final","lift","mix","private","stop","teach","western","concern","familiar","fly","official","broad","comfortable","gain","rich","save","stand","young","heavy","lead","listen","valuable","worry","handle","leading","meet","release","sell","finish","normal","press","ride","secret","spread","spring","tough","wait","brown","deep","display","flow","hit","objective","shoot","touch","cancel","chemical","cry","dump","extreme","push","conflict","eat","fill","formal","jump","kick","opposite","pass","pitch","remote","total","treat","vast","abuse","beat","burn","deposit","print","raise","sleep","somewhere","advance","consist","dark","double","draw","equal","fix","hire","internal","join","kill","sensitive","tap","win","attack","claim","constant","drag","drink","guess","minor","pull","raw","soft","solid","wear","weird","wonder","annual","count","dead","doubt","feed","forever","impress","repeat","round","sing","slide","strip","wish","combine","command","dig","divide","equivalent","hang","hunt","initial","march","mention","spiritual","survey","tie","adult","brief","crazy","escape","gather","hate","prior","repair","rough","sad","scratch","sick","strike","employ","external","hurt","illegal","laugh","lay","mobile","nasty","ordinary","respond","royal","senior","split","strain","struggle","swim","train","upper","wash","yellow","convert","crash","dependent","fold","funny","grab","hide","miss","permit","quote","recover","resolve","roll","sink","slip","spare","suspect","sweet","swing","twist","upstairs","usual","abroad","brave","calm","concentrate","estimate","grand","male","mine","prompt","quiet","refuse","regret","reveal","rush","shake","shift","shine","steal","suck","surround","bear","brilliant","dare","dear","delay","drunk","female","hurry","inevitable","invite","kiss","neat","pop","punch","quit","reply","representative","resist","rip","rub","silly","smile","spell","stretch","stupid","tear","temporary","tomorrow","wake","wrap","yesterday","Thomas","Tom","Lieuwe"];return z(e[U(0,e.length+1)])+" "+z(t[U(0,t.length+1)])}var Y,F=a(767),H=(a(488),a(386)),q=a(358),K=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={chatMsg:"",isNearBottom:!0,isPickerOpen:!1},e.messagesRef=r.a.createRef(),e.updateChatMsg=function(t,a){e.setState({chatMsg:a.value})},e.sendChatMsg=function(){e.state.chatMsg&&(e.chatTooLong()||(e.setState({chatMsg:""}),e.props.socket.emit("CMD:chat",e.state.chatMsg)))},e.chatTooLong=function(){var t;return Boolean((null===(t=e.state.chatMsg)||void 0===t?void 0:t.length)>1e4)},e.onScroll=function(){e.setState({isNearBottom:e.isChatNearBottom()})},e.isChatNearBottom=function(){return e.messagesRef.current&&e.messagesRef.current.scrollHeight-e.messagesRef.current.scrollTop-e.messagesRef.current.offsetHeight<100},e.scrollToBottom=function(){e.messagesRef.current&&(e.messagesRef.current.scrollTop=e.messagesRef.current.scrollHeight)},e.formatMessage=function(t,a){return"host"===t?r.a.createElement(r.a.Fragment,null,"changed the video to ",r.a.createElement("span",{style:{textTransform:"initial"}},e.props.getMediaDisplayName(a))):"seek"===t?"jumped to ".concat(Object(A.d)(a)):"play"===t?"started the video at ".concat(Object(A.d)(a)):"pause"===t?"paused the video at ".concat(Object(A.d)(a)):"lock"===t?"locked the room":"unlock"===t?"unlocked the room":"vBrowserTimeout"===t?r.a.createElement(r.a.Fragment,null,"The VBrowser shut down automatically.",r.a.createElement("br",null),"Subscribe for sessions up to 12 hours."):"vBrowserAlmostTimeout"===t?r.a.createElement(r.a.Fragment,null,"The VBrowser will shut down soon.",r.a.createElement("br",null),"Subscribe for sessions up to 12 hours."):t},e.addEmoji=function(t){e.setState({chatMsg:e.state.chatMsg+t.native})},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e;this.scrollToBottom(),null===(e=this.messagesRef.current)||void 0===e||e.addEventListener("scroll",this.onScroll)}},{key:"componentDidUpdate",value:function(e){this.props.scrollTimestamp!==e.scrollTimestamp&&(0===e.scrollTimestamp||this.state.isNearBottom)&&this.scrollToBottom(),this.props.hide!==e.hide&&this.scrollToBottom()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.props.className,style:{display:this.props.hide?"none":"flex",flexDirection:"column",flexGrow:1,minHeight:0,marginTop:0,marginBottom:0,padding:"8px"}},r.a.createElement("div",{className:"chatContainer",ref:this.messagesRef,style:{position:"relative"}},r.a.createElement(F.a.Group,null,this.props.chat.map((function(t){return r.a.createElement($,{key:t.timestamp+t.id,message:t,pictureMap:e.props.pictureMap,nameMap:e.props.nameMap,formatMessage:e.formatMessage})}))),!this.state.isNearBottom&&r.a.createElement(O.a,{size:"tiny",onClick:this.scrollToBottom,style:{position:"sticky",bottom:0,display:"block",margin:"0 auto"}},"Jump to bottom")),r.a.createElement(nt,null),this.state.isPickerOpen&&r.a.createElement(J,{addEmoji:this.addEmoji,closeMenu:function(){return e.setState({isPickerOpen:!1})}}),r.a.createElement(B.a,{inverted:!0,fluid:!0,onKeyPress:function(t){return"Enter"===t.key&&e.sendChatMsg()},onChange:this.updateChatMsg,value:this.state.chatMsg,error:this.chatTooLong(),icon:!0,placeholder:"Enter a message..."},r.a.createElement("input",null),r.a.createElement(T.a,{onClick:function(){return e.setState({isPickerOpen:!0})},name:"",inverted:!0,circular:!0,link:!0,style:{opacity:1}},r.a.createElement("span",{role:"img","aria-label":"Emoji"},"\ud83d\ude00"))))}}]),a}(r.a.Component),$=function(e){var t=e.message,a=e.nameMap,n=e.pictureMap,i=e.formatMessage,o=t.id,s=t.timestamp,l=t.cmd,c=t.msg,u=t.system;return r.a.createElement(F.a,null,o?r.a.createElement(F.a.Avatar,{src:n[o]||Object(A.g)(a[o],Object(A.f)(o))}):null,r.a.createElement(F.a.Content,null,r.a.createElement(F.a.Author,{as:"a",className:"light"},Boolean(u)&&"System",a[o]||o),r.a.createElement(F.a.Metadata,{className:"dark"},r.a.createElement("div",null,new Date(s).toLocaleTimeString())),r.a.createElement(F.a.Text,{className:"light system"},l&&i(l,c)),r.a.createElement(F.a.Text,{className:"light"},!l&&c)))},G=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleClickOutside=function(){e.props.closeMenu()},e}return Object(f.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{position:"absolute",bottom:"60px"}},r.a.createElement(H.a,{set:"google",sheetSize:64,theme:"dark",showPreview:!1,showSkinTones:!1,onSelect:this.props.addEmoji}))}}]),a}(r.a.Component),J=Object(q.a)(G),X=a(38),Q=a.n(X),Z=(a(201),a(766)),ee=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",isCreateMode:!1,error:""},e.resetPassword=Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X.auth().sendPasswordResetEmail(e.state.email);case 3:e.props.closeLogin(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.setState({error:t.t0.message});case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))),e.emailSignIn=function(){var t=Object(p.a)(d.a.mark((function t(a,n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X.auth().signInWithEmailAndPassword(a,n);case 3:e.props.closeLogin(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.setState({error:t.t0.message});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,a){return t.apply(this,arguments)}}(),e.createAccount=function(){var t=Object(p.a)(d.a.mark((function t(a,n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X.auth().createUserWithEmailAndPassword(a,n);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),e.setState({error:t.t0.message});case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e,a){return t.apply(this,arguments)}}(),e.emailLinkSignIn=Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.auth().sendSignInLinkToEmail(e.state.email,{url:window.location.href,handleCodeInApp:!0});case 2:case"end":return t.stop()}}),t)}))),e}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props.closeLogin;return r.a.createElement(x.a,{open:!0,onClose:t},r.a.createElement(x.a.Header,null,this.state.isCreateMode?"Create an account":"Login"),r.a.createElement(x.a.Content,null,this.state.error&&r.a.createElement(C.a,{color:"red",header:"Error",content:this.state.error}),r.a.createElement(Z.a,null,r.a.createElement(Z.a.Field,null,r.a.createElement("label",null,"Email"),r.a.createElement("input",{placeholder:"Email",value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}})),r.a.createElement(Z.a.Field,null,r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",placeholder:"Password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}})),!this.state.isCreateMode&&r.a.createElement("div",null,"Don't have an account?"," ",r.a.createElement("button",{type:"button",className:"linkButton",onClick:function(){return e.setState({isCreateMode:!0})}},"Create one.")," ","Forgot your password? Enter your email and"," ",r.a.createElement("button",{type:"button",className:"linkButton",onClick:this.resetPassword},"reset it.")),this.state.isCreateMode?r.a.createElement(O.a,{type:"submit",onClick:function(){return e.createAccount(e.state.email,e.state.password)}},"Create"):r.a.createElement(O.a,{type:"submit",onClick:function(){return e.emailSignIn(e.state.email,e.state.password)}},"Login"))))}}]),a}(r.a.Component),te=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).createRoom=Object(p.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch(A.o+"/createRoom",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.name,window.location.hash="#"+n,window.location.reload();case 9:case"end":return e.stop()}}),e)}))),e}return Object(f.a)(a,[{key:"render",value:function(){return r.a.createElement(j.a,{content:"Create a new room with a random URL that you can share with friends"})}}]),a}(r.a.Component),ae=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isLoginOpen:!1},e.facebookSignIn=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new X.auth.FacebookAuthProvider,e.next=3,X.auth().signInWithPopup(t);case 3:case"end":return e.stop()}}),e)}))),e.googleSignIn=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new X.auth.GoogleAuthProvider,e.next=3,X.auth().signInWithPopup(t);case 3:case"end":return e.stop()}}),e)}))),e.signOut=function(){X.auth().signOut(),window.location.reload()},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this;return this.props.user?r.a.createElement(O.a,{style:{height:"36px"},icon:!0,labelPosition:"left",onClick:this.signOut},r.a.createElement(T.a,{name:"sign out"}),"Sign out"):r.a.createElement(r.a.Fragment,null,this.state.isLoginOpen&&r.a.createElement(ee,{closeLogin:function(){return e.setState({isLoginOpen:!1})}}))}}]),a}(r.a.Component),ne=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={rooms:[]},e.refreshRooms=Object(p.a)(d.a.mark((function t(){var a,n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.user){t.next=8;break}return t.next=3,e.props.user.getIdToken();case 3:return n=t.sent,t.next=6,k.a.get(A.o+"/listRooms?uid=".concat(null===(a=e.props.user)||void 0===a?void 0:a.uid,"&token=").concat(n));case 6:r=t.sent,e.setState({rooms:r.data});case 8:case"end":return t.stop()}}),t)}))),e.deleteRoom=function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.user){t.next=8;break}return t.next=3,e.props.user.getIdToken();case 3:return r=t.sent,t.next=6,k.a.delete(A.o+"/deleteRoom?uid=".concat(null===(n=e.props.user)||void 0===n?void 0:n.uid,"&token=").concat(r,"&roomId=").concat(a));case 6:e.setState({rooms:e.state.rooms.filter((function(e){return e.roomId!==a}))}),e.refreshRooms();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.refreshRooms()}},{key:"render",value:function(){var e=this;return r.a.createElement(P.a,{style:{height:"36px"},icon:"group",labeled:!0,className:"icon",button:!0,text:"My Rooms",onClick:this.refreshRooms},r.a.createElement(P.a.Menu,null,0===this.state.rooms.length&&r.a.createElement(P.a.Item,{disabled:!0},"You have no permanent rooms."),this.state.rooms.map((function(t){return r.a.createElement(P.a.Item,{link:!0,href:t.vanity?"/r/"+t.vanity:"/"+t.roomId.replace("/","#"),onClick:function(){t.vanity||setTimeout((function(){return window.location.reload()}),100)}},r.a.createElement("div",{style:{display:"flex"}},t.vanity?"/r/".concat(t.vanity):t.roomId.replace("/","#"),r.a.createElement("div",{style:{marginLeft:"auto",paddingLeft:"20px"}},r.a.createElement(j.a,{content:"Delete room",trigger:r.a.createElement(T.a,{onClick:function(a){a.stopPropagation(),e.deleteRoom(t.roomId)},name:"x",color:"red"})}))))}))))}}]),a}(r.a.Component),re=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",padding:"1em",paddingBottom:"0px"}},r.a.createElement("a",{href:"/",style:{display:"flex"}},r.a.createElement("img",{src:"/fayrtv_logo.png",alt:"FAYR TV"}),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}})),r.a.createElement("div",{style:{display:"flex",marginLeft:"10px",alignItems:"center"}},!this.props.hideNewRoom&&r.a.createElement(te,null),!this.props.hideMyRooms&&this.props.user&&r.a.createElement(ne,{user:this.props.user}),!this.props.hideSignin&&r.a.createElement(ae,{user:this.props.user}))))}}]),a}(r.a.Component),ie=a(389),oe=a(379),se=1,le=2,ce=3,ue=4,de="CONNECTING",me="CONNECTED",pe="DISCONNECTED",he="TRACK",fe="MESSAGE",ge="DATA",ve={DISCONNECT:"system/disconnect"},be={ANSWER:"signal/answer",PROVIDE:"signal/provide"},ye={LOCKED:"control/locked",RELEASE:"control/release",REQUEST:"control/request",REQUESTING:"control/requesting",CLIPBOARD:"control/clipboard",GIVE:"control/give"},we={CONFIGURATIONS:"screen/configurations",RESOLUTION:"screen/resolution",SET:"screen/set"},ke={BAN:"admin/ban",KICK:"admin/kick",LOCK:"admin/lock",UNLOCK:"admin/unlock",MUTE:"admin/mute",UNMUTE:"admin/unmute",CONTROL:"admin/control",RELEASE:"admin/release",GIVE:"admin/give"};Y=fe;var Ee=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._ws=void 0,e._peer=void 0,e._channel=void 0,e._timeout=void 0,e._displayname=void 0,e._state="disconnected",e._id="",e}return Object(f.a)(a,[{key:"connect",value:function(e,t,a){var n=this;if(this.socketOpen)this.emit("warn","attempting to create websocket while connection open");else if(this.supported){if(""===a)throw new Error("Must add a displayname");this._displayname=a,this[de]();try{this._ws=new WebSocket("".concat(e,"ws?password=").concat(t)),this.emit("debug","connecting to ".concat(this._ws.url)),this._ws.onmessage=this.onMessage.bind(this),this._ws.onerror=function(e){return n.onError.bind(n)},this._ws.onclose=function(e){return n.onDisconnected.bind(n,new Error("websocket closed"))},this._timeout=setTimeout(this.onTimeout.bind(this),15e3)}catch(r){this.onDisconnected(r)}}else this.onDisconnected(new Error("browser does not support webrtc (RTCPeerConnection missing)"))}},{key:"disconnect",value:function(){if(this._timeout&&clearTimeout(this._timeout),this.socketOpen){try{this._ws.close()}catch(e){}this._ws=void 0}if(this.peerConnected){try{this._peer.close()}catch(e){}this._peer=void 0}this._state="disconnected",this._displayname=void 0,this._id=""}},{key:"sendData",value:function(e,t){if(this.connected){var a,n;switch(e){case"mousemove":a=new ArrayBuffer(7),(n=new DataView(a)).setUint8(0,se),n.setUint16(1,4,!0),n.setUint16(3,t.x,!0),n.setUint16(5,t.y,!0);break;case"wheel":a=new ArrayBuffer(7),(n=new DataView(a)).setUint8(0,le),n.setUint16(1,4,!0),n.setInt16(3,t.x,!0),n.setInt16(5,t.y,!0);break;case"keydown":case"mousedown":a=new ArrayBuffer(5),(n=new DataView(a)).setUint8(0,ce),n.setUint16(1,1,!0),n.setUint16(3,t.key,!0);break;case"keyup":case"mouseup":a=new ArrayBuffer(5),(n=new DataView(a)).setUint8(0,ue),n.setUint16(1,1,!0),n.setUint16(3,t.key,!0);break;default:this.emit("warn","unknown data event: ".concat(e))}"undefined"!==typeof a&&this._channel.send(a)}else this.emit("warn","attempting to send data while disconnected")}},{key:"sendMessage",value:function(e,t){this.connected?(this.emit("debug","sending event '".concat(e,"' ").concat(t?"with payload: ":""),t),this._ws.send(JSON.stringify(Object(m.a)({event:e},t)))):this.emit("warn","attempting to send message while disconnected")}},{key:"createPeer",value:function(e,t,a){var n=this;this.emit("debug","creating peer"),this.socketOpen?this.peerConnected?this.emit("warn","attempting to create peer while connected"):(this._peer=new RTCPeerConnection,!0!==t&&(this._peer=new RTCPeerConnection({iceServers:a?[{urls:a}]:Object(A.l)()})),this._peer.onconnectionstatechange=function(e){n.emit("debug","peer connection state changed",n._peer?n._peer.connectionState:void 0)},this._peer.onsignalingstatechange=function(e){n.emit("debug","peer signaling state changed",n._peer?n._peer.signalingState:void 0)},this._peer.oniceconnectionstatechange=function(e){switch(n._state=n._peer.iceConnectionState,n.emit("debug","peer ice connection state changed: ".concat(n._peer.iceConnectionState)),n._state){case"checking":n._timeout&&clearTimeout(n._timeout);break;case"connected":n.onConnected();break;case"failed":n.onDisconnected(new Error("peer failed"));break;case"disconnected":n.onDisconnected(new Error("peer disconnected"))}},this._peer.ontrack=this.onTrack.bind(this),this._peer.addTransceiver("audio",{direction:"recvonly"}),this._peer.addTransceiver("video",{direction:"recvonly"}),this._channel=this._peer.createDataChannel("data"),this._channel.onerror=this.onError.bind(this),this._channel.onmessage=this.onData.bind(this),this._channel.onclose=this.onDisconnected.bind(this,new Error("peer data channel closed")),this._peer.setRemoteDescription({type:"offer",sdp:e}),this._peer.createAnswer().then((function(e){n._peer.setLocalDescription(e),n._ws.send(JSON.stringify({event:be.ANSWER,sdp:e.sdp,displayname:n._displayname}))})).catch((function(e){return n.emit("error",e)}))):this.emit("warn","attempting to create peer with no websocket: ",this._ws?"state: ".concat(this._ws.readyState):"no socket")}},{key:"onMessage",value:function(e){var t=JSON.parse(e.data),a=t.event,n=Object(ie.a)(t,["event"]);if(this.emit("debug","received websocket event ".concat(a," ").concat(n?"with payload: ":""),n),a===be.PROVIDE){var r=n,i=r.sdp,o=r.lite,s=r.ice,l=r.id;return this._id=l,void this.createPeer(i,o,s)}"function"===typeof this[a]?this[a](n):this[fe](a,n)}},{key:"onData",value:function(e){this[ge](e.data)}},{key:"onTrack",value:function(e){this.emit("debug","received ".concat(e.track.kind," track from peer: ").concat(e.track.id),e),e.streams[0]?this[he](e):this.emit("warn","no stream provided for track ".concat(e.track.id,"(").concat(e.track.label,")"))}},{key:"onError",value:function(e){this.emit("error",e.error)}},{key:"onConnected",value:function(){this._timeout&&clearTimeout(this._timeout),this.connected?(this.emit("debug","connected"),this[me]()):this.emit("warn","onConnected called while being disconnected")}},{key:"onTimeout",value:function(){this.emit("debug","connection timeout"),this._timeout&&clearTimeout(this._timeout),this.onDisconnected(new Error("connection timeout"))}},{key:"onDisconnected",value:function(e){this.disconnect(),this.emit("debug","disconnected:",e),this[pe](e)}},{key:Y,value:function(e,t){this.emit("warn","unhandled websocket event '".concat(e,"':"),t)}},{key:"id",get:function(){return this._id}},{key:"supported",get:function(){return"undefined"!==typeof RTCPeerConnection&&"undefined"!==typeof RTCPeerConnection.prototype.addTransceiver}},{key:"socketOpen",get:function(){return"undefined"!==typeof this._ws&&this._ws.readyState===WebSocket.OPEN}},{key:"peerConnected",get:function(){return"undefined"!==typeof this._peer&&["connected","checking","completed"].includes(this._state)}},{key:"connected",get:function(){return this.peerConnected&&this.socketOpen}}]),a}(a.n(oe).a),Se=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).focused=!1,e.fullscreen=!1,e.activeKeys=new Set,e.controlling=!1,e.scroll=1,e.scroll_invert=!0,e.width=1280,e.height=720,e.rate=30,e.keepAliveInterval=0,e._container=r.a.createRef(),e._overlay=r.a.createRef(),e._video=r.a.createRef(),e.$client=new Ce,e.takeControl=function(){e.$client.connected?e.$client.sendMessage(ke.CONTROL):e.$client.once(me,(function(){e.$client.sendMessage(ke.CONTROL)}))},e.changeResolution=function(t){var a=t.split(/x|@/),n=Number(a[0]),r=Number(a[1]),i=Number(a[2]);e.$client.sendMessage(we.SET,{width:n,height:r,rate:i})},e.onFocus=Object(p.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.controlling||!navigator.clipboard||"function"!==typeof navigator.clipboard.readText){t.next=5;break}return t.next=3,navigator.clipboard.readText();case 3:a=t.sent,e.$client.sendMessage(ye.CLIPBOARD,{text:a});case 5:case"end":return t.stop()}}),t)}))),e.onBlur=function(){e.focused&&e.controlling&&e.activeKeys.forEach((function(t){e.$client.sendData("keyup",{key:t}),e.activeKeys.delete(t)}))},e.onClick=function(e){e.stopPropagation(),e.preventDefault()},e.onContextMenu=function(e){e.stopPropagation(),e.preventDefault()},e.onMousePos=function(t){var a={w:e.width,h:e.height},n=a.w,r=a.h,i=e._overlay.current.getBoundingClientRect();e.$client.sendData("mousemove",{x:Math.round(n/i.width*(t.clientX-i.left)),y:Math.round(r/i.height*(t.clientY-i.top))})},e.onWheel=function(t){if(t.stopPropagation(),t.preventDefault(),e.controlling){e.onMousePos(t);var a=t.deltaX,n=t.deltaY;e.scroll_invert&&(a*=-1,n*=-1),a=Math.min(Math.max(a,-e.scroll),e.scroll),n=Math.min(Math.max(n,-e.scroll),e.scroll),e.$client.sendData("wheel",{x:a,y:n})}},e.onMouseDown=function(t){t.stopPropagation(),t.preventDefault(),e.controlling&&(e.onMousePos(t),e.$client.sendData("mousedown",{key:t.button}))},e.onMouseUp=function(t){t.stopPropagation(),t.preventDefault(),e.controlling&&(e.onMousePos(t),e.$client.sendData("mouseup",{key:t.button}))},e.onMouseMove=function(t){e.controlling&&e.onMousePos(t)},e.onMouseEnter=function(t){e.controlling&&(e._overlay.current.focus(),e.onFocus(),e.focused=!0)},e.onMouseLeave=function(t){e.controlling&&(e._overlay.current.blur(),e.focused=!1)},e.getCode=function(e){var t=e.keyCode;return 59!==t||";"!==e.key&&":"!==e.key||(t=186),61!==t||"="!==e.key&&"+"!==e.key||(t=187),173!==t||"-"!==e.key&&"_"!==e.key||(t=189),t},e.onKeyDown=function(t){if(t.stopPropagation(),t.preventDefault(),e.focused&&e.controlling){var a=e.getCode(t);e.$client.sendData("keydown",{key:a}),e.activeKeys.add(a)}},e.onKeyUp=function(t){if(t.stopPropagation(),t.preventDefault(),e.focused&&e.controlling){var a=e.getCode(t);e.$client.sendData("keyup",{key:a}),e.activeKeys.delete(a)}},e.onResize=function(){},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;this.controlling=this.props.controlling,this.keepAliveInterval=window.setInterval((function(){return t.$client.sendMessage("ka")}),1e4),this.$client.on(me,(function(){t.props.controlling&&t.takeControl()})),this.$client.on(pe,(function(){t.$client.login(a,t.props.password,t.props.username)})),this.$client.on(we.RESOLUTION,(function(e){t.width=e.width,t.height=e.height,t.rate=e.rate,t.props.setResolution("".concat(t.width,"x").concat(t.height,"@").concat(t.rate))})),this.$client.on(he,(function(e,a){var n=document.getElementById("leftVideo");n.src="",n.srcObject=a,t.props.isAutoPlayable||(n.muted=!0),n.play()})),this.$client.on(ye.CLIPBOARD,this.onClipboardChanged);var a="wss://"+this.props.hostname+"/";this.$client.login(a,this.props.password,this.props.username),document.addEventListener("focusin",this.onFocus.bind(this)),document.addEventListener("focusout",this.onBlur.bind(this)),null===(e=document.getElementById("leftOverlay"))||void 0===e||e.addEventListener("wheel",this.onWheel,{passive:!1})}},{key:"componentDidUpdate",value:function(e){this.controlling=this.props.controlling,this.props.controlling&&!e.controlling&&this.takeControl(),this.props.resolution!==e.resolution&&this.changeResolution(this.props.resolution)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.keepAliveInterval),this.$client.removeAllListeners(),this.$client.logout()}},{key:"onClipboardChanged",value:function(e){navigator.clipboard&&"function"===typeof navigator.clipboard.writeText&&navigator.clipboard.writeText(e)}},{key:"render",value:function(){var e,t;return r.a.createElement("div",{ref:this._container,style:{position:"relative",width:"100%"}},r.a.createElement("video",{ref:this._video,id:"leftVideo",style:{width:"100%"}}),r.a.createElement("div",{ref:this._overlay,id:"leftOverlay",tabIndex:0,style:{width:null===(e=document.getElementById("leftVideo"))||void 0===e?void 0:e.clientWidth,height:null===(t=document.getElementById("leftVideo"))||void 0===t?void 0:t.clientHeight,position:"absolute",top:0,bottom:0,scrollbarWidth:"none"},onClick:this.onClick,onContextMenu:this.onContextMenu,onMouseMove:this.onMouseMove,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp}))}}]),a}(r.a.Component),Ce=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"login",value:function(e,t,a){this.connect(e,t,a)}},{key:"logout",value:function(){this.disconnect()}},{key:de,value:function(){}},{key:me,value:function(){this.emit(me)}},{key:pe,value:function(e){console.warn(e),this.emit(pe)}},{key:he,value:function(e){var t=e.track,a=e.streams;this.emit(he,t,a[0])}},{key:ge,value:function(e){console.log("[DATA]",e)}},{key:ve.DISCONNECT,value:function(e){var t=e.message;this.onDisconnected(new Error(t))}},{key:ye.LOCKED,value:function(e){e.id}},{key:ye.RELEASE,value:function(e){e.id}},{key:ye.GIVE,value:function(e){e.id,e.target}},{key:ye.CLIPBOARD,value:function(e){var t=e.text;this.emit(ye.CLIPBOARD,t)}},{key:we.CONFIGURATIONS,value:function(e){e.configurations}},{key:we.RESOLUTION,value:function(e){e.id;var t=e.width,a=e.height,n=e.rate;this.emit(we.RESOLUTION,{width:t,height:a,rate:n})}}]),a}(Ee),xe=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).ourStream=void 0,e.videoRefs={},e.videoPCs={},e.socket=e.props.socket,e.handleSignal=function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r,i,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.msg,r=a.from,i=e.videoPCs[r],console.log("recv",r,a),void 0===n.ice){t.next=8;break}i.addIceCandidate(new RTCIceCandidate(n.ice)),t.next=20;break;case 8:if(!n.sdp||"offer"!==n.sdp.type){t.next=19;break}return t.next=11,i.setRemoteDescription(new RTCSessionDescription(n.sdp));case 11:return t.next=13,i.createAnswer();case 13:return o=t.sent,t.next=16,i.setLocalDescription(o);case 16:e.sendSignal(r,{sdp:i.localDescription}),t.next=20;break;case 19:n.sdp&&"answer"===n.sdp.type&&i.setRemoteDescription(new RTCSessionDescription(n.sdp));case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setupWebRTC=Object(p.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getUserMedia({audio:!0,video:!0});case 2:a=t.sent,e.ourStream=a,e.socket.emit("CMD:joinVideo");case 5:case"end":return t.stop()}}),t)}))),e.stopWebRTC=function(){e.ourStream&&e.ourStream.getTracks().forEach((function(e){e.stop()})),e.ourStream=void 0,Object.values(e.videoPCs).forEach((function(e){e.close()})),e.videoPCs={},e.socket.emit("CMD:leaveVideo")},e.toggleVideoWebRTC=function(){e.ourStream&&(e.ourStream.getVideoTracks()[0].enabled=!e.ourStream.getVideoTracks()[0].enabled)},e.getVideoWebRTC=function(){return e.ourStream&&e.ourStream.getVideoTracks()[0].enabled},e.toggleAudioWebRTC=function(){e.ourStream&&(e.ourStream.getAudioTracks()[0].enabled=!e.ourStream.getAudioTracks()[0].enabled)},e.getAudioWebRTC=function(){return e.ourStream&&e.ourStream.getAudioTracks()[0]&&e.ourStream.getAudioTracks()[0].enabled},e.updateWebRTC=function(){e.ourStream&&e.props.participants.forEach((function(t){var a=t.id;if(t.isVideoChat&&!e.videoPCs[a])if(a===e.socket.id)e.videoPCs[a]=new RTCPeerConnection,e.videoRefs[a].srcObject=e.ourStream;else{var n=new RTCPeerConnection({iceServers:Object(A.l)()});e.videoPCs[a]=n,n.addStream(e.ourStream),n.onicecandidate=function(t){t.candidate&&e.sendSignal(a,{ice:t.candidate})},n.onaddstream=function(t){var n=t.stream;e.videoRefs[a].srcObject=n},e.socket.id<a&&(n.onnegotiationneeded=Object(p.a)(d.a.mark((function t(){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.createOffer();case 2:return r=t.sent,t.next=5,n.setLocalDescription(r);case 5:e.sendSignal(a,{sdp:n.localDescription});case 6:case"end":return t.stop()}}),t)}))))}}))},e.sendSignal=function(){var t=Object(p.a)(d.a.mark((function t(a,n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("send",a,n),e.socket.emit("signal",{to:a,msg:n});case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.socket.on("signal",this.handleSignal)}},{key:"componentWillUnmount",value:function(){this.socket.off("signal",this.handleSignal)}},{key:"componentDidUpdate",value:function(e){this.props.rosterUpdateTS!==e.rosterUpdateTS&&this.updateWebRTC()}},{key:"render",value:function(){var e=this,t=this.props,a=t.participants,n=t.pictureMap,i=t.nameMap,o=t.tsMap,s=t.socket;return r.a.createElement("div",{style:{display:this.props.hide?"none":"flex",width:"100%",flexDirection:"column",overflow:"auto"}},!this.ourStream&&r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},r.a.createElement(O.a,{fluid:!0,title:"Join Video Chat",color:"purple",size:"medium",icon:!0,labelPosition:"left",onClick:this.setupWebRTC},r.a.createElement(T.a,{name:"video"}),"Join Video Chat")),this.ourStream&&r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},r.a.createElement(O.a,{fluid:!0,color:"red",size:"medium",icon:!0,labelPosition:"left",onClick:this.stopWebRTC},r.a.createElement(T.a,{name:"external"}),"Leave"),r.a.createElement(O.a,{fluid:!0,color:this.getVideoWebRTC()?"green":"red",size:"medium",icon:!0,labelPosition:"left",onClick:this.toggleVideoWebRTC},r.a.createElement(T.a,{name:"video"}),this.getVideoWebRTC()?"On":"Off"),r.a.createElement(O.a,{fluid:!0,color:this.getAudioWebRTC()?"green":"red",size:"medium",icon:!0,labelPosition:"left",onClick:this.toggleAudioWebRTC},r.a.createElement(T.a,{name:this.getAudioWebRTC()?"microphone":"microphone slash"}),this.getAudioWebRTC()?"On":"Off")),r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},a.map((function(t){return r.a.createElement("div",{key:t.id},r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("div",null,e.ourStream&&t.isVideoChat?r.a.createElement("video",{ref:function(a){e.videoRefs[t.id]=a},className:"videoChatContent",autoPlay:!0,muted:t.id===s.id,"data-id":t.id}):r.a.createElement("img",{className:"videoChatContent",src:n[t.id]||Object(A.g)(i[t.id],Object(A.f)(t.id)),alt:""}),r.a.createElement("div",{style:{position:"absolute",bottom:"4px",left:"0px",width:"100%",backgroundColor:"rgba(0,0,0,0)",color:"white",borderRadius:"4px",fontSize:"10px",fontWeight:700,display:"flex"}},r.a.createElement("div",{title:i[t.id]||t.id,style:{width:"80px",backdropFilter:"brightness(80%)",padding:"4px",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",display:"inline-block"}},t.isVideoChat&&r.a.createElement(T.a,{size:"small",name:"video"}),i[t.id]||t.id),r.a.createElement("div",{style:{backdropFilter:"brightness(60%)",padding:"4px",flexGrow:1,display:"flex",justifyContent:"center"}},Object(A.d)(o[t.id]||0))))))}))))}}]),a}(r.a.Component),Oe=a(776);a(761);function Te(){var e=window.localStorage.getItem("watchparty-setting");try{var t=Me(e);return t||{}}catch(a){return console.warn(a),{}}}function Me(e){var t=JSON.parse(e);if(!e)return{};if("{"!==e[0])throw new Error("failed to parse settings, using defaults");return t}function je(e){window.localStorage.setItem("watchparty-setting",e)}var Pe=a(770),Re=function(e){var t=e.streams,a=e.setMedia,n=e.resetMultiSelect;return r.a.createElement(x.a,{inverted:!0,basic:!0,open:!0,closeIcon:!0,onClose:n},r.a.createElement(x.a.Header,null,"Select a file"),r.a.createElement(x.a.Content,null,0===t.length&&r.a.createElement(_.a,null),t&&r.a.createElement(Pe.a,{inverted:!0},t.map((function(e){return r.a.createElement(Pe.a.Item,null,r.a.createElement(Pe.a.Icon,{name:"file"}),r.a.createElement(Pe.a.Content,null,r.a.createElement(Pe.a.Header,{as:"a",onClick:function(){a(null,{value:e.url}),n()}},e.name),r.a.createElement(Pe.a.Description,null,e.length.toLocaleString()," bytes")))})))))},_e=["https://upload.wikimedia.org/wikipedia/commons/a/a5/Spring_-_Blender_Open_Movie.webm","https://upload.wikimedia.org/wikipedia/commons/3/36/Cosmos_Laundromat_-_First_Cycle_-_Official_Blender_Foundation_release.webm","https://upload.wikimedia.org/wikipedia/commons/a/a2/Elephants_Dream_%282006%29.webm","https://upload.wikimedia.org/wikipedia/commons/a/a9/HERO_-_Blender_Open_Movie-full_movie.webm","https://upload.wikimedia.org/wikipedia/commons/0/02/Glass_Half_-_Blender_Open_Movie-full_movie.webm","https://upload.wikimedia.org/wikipedia/commons/d/d0/Caminandes-_Llama_Drama_-_Short_Movie.ogv","https://upload.wikimedia.org/wikipedia/commons/7/7c/Caminandes_-_Gran_Dillama_-_Blender_Foundation%27s_new_Open_Movie.webm","https://upload.wikimedia.org/wikipedia/commons/a/ab/Caminandes_3_-_Llamigos_-_Blender_Animated_Short.webm"].map((function(e){return{url:e,type:"file",name:e.slice(e.lastIndexOf("/")+1)}})),De=a(119),Be=function(e){var t=e,a=e.setMedia;return r.a.createElement(I.a.Item,{onClick:function(e){a(e,{value:t.url})}},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("img",{style:{height:"40px"},src:t.img,alt:t.name}),r.a.createElement(T.a,{name:"youtube"}),r.a.createElement("div",{style:{marginLeft:"5px"}},Object(A.b)(t.name))))},Ie=function(e){var t=e,a=e.setMedia;return r.a.createElement(I.a.Item,{onClick:function(e){a(e,{value:t.url})}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(T.a,{name:"file"}),t.name))},Ne=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=this.props.setMedia;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a.Item,{onClick:function(){var n=Object(p.a)(d.a.mark((function n(r){var i,o,s;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.props.launchMultiSelect([]),n.next=3,window.fetch(e.props.streamPath+"/data?torrent="+encodeURIComponent(t.magnet));case 3:return i=n.sent,n.next=6,i.json();case 6:(o=n.sent).files.filter((function(e){return e.length>10485760})).length>1?((s=o.files.map((function(a,n){return Object(m.a)(Object(m.a)({},a),{},{url:e.props.streamPath+"/stream?torrent="+encodeURIComponent(t.magnet)+"&fileIndex="+n})}))).sort((function(e,t){return e.name.localeCompare(t.name)})),e.props.launchMultiSelect(s)):(e.props.launchMultiSelect(void 0),a(r,{value:e.props.streamPath+"/stream?torrent="+encodeURIComponent(t.magnet)}));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},r.a.createElement(De.a,{circular:!0,empty:!0,color:Number(t.seeders)?"green":"red"}),r.a.createElement(T.a,{name:"film"}),t.name+" - "+t.size+" - "+t.seeders+" peers"))}}]),a}(r.a.Component),Ve=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={inputMedia:void 0,results:void 0,loading:!1,lastResultTimestamp:Number(new Date)},e.debounced=null,e.setMedia=function(t,a){window.setTimeout((function(){return e.setState({inputMedia:void 0,results:void 0})}),300),e.props.setMedia(t,a)},e.doSearch=function(){var t=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.persist(),e.setState({inputMedia:a.target.value},(function(){e.debounced||(e.debounced=Object(A.a)(Object(p.a)(d.a.mark((function t(){var a,n,i,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({loading:!0}),a=e.state.inputMedia||"",n=Number(new Date),i=void 0,!(""===a||a&&a.startsWith("http"))){t.next=8;break}i=_e.map((function(t){return r.a.createElement(I.a.Item,{key:t.url,onClick:function(a){return e.setMedia(a,{value:t.url})}},t.url)})),t.next=12;break;case 8:return t.next=10,Object(A.k)(a);case 10:o=t.sent,i=o.map((function(t){return r.a.createElement(Be,Object.assign({key:t.url},t,{setMedia:e.setMedia}))}));case 12:n>e.state.lastResultTimestamp&&e.setState({loading:!1,results:i,lastResultTimestamp:n});case 13:case"end":return t.stop()}}),t)}))),500)),e.debounced()}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(f.a)(a,[{key:"render",value:function(){var e=this.state.results;return r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("div",{style:{display:"flex"}}),Boolean(e)&&void 0!==this.state.inputMedia&&r.a.createElement(I.a,{fluid:!0,vertical:!0,style:{position:"absolute",top:"22px",maxHeight:"250px",overflow:"scroll",zIndex:1001}},e))}}]),a}(r.a.Component),Le=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={results:[],resetDropdown:Number(new Date),loading:!1,lastResultTimestamp:Number(new Date),inputMedia:void 0},e.debounced=null,e.doSearch=function(){var t=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.persist(),e.setState({inputMedia:a.target.value},(function(){e.debounced||(e.debounced=Object(A.a)(Object(p.a)(d.a.mark((function t(){var a,n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({loading:!0}),a=e.state.inputMedia||"",n=[],r=Number(new Date),"youtube"!==e.props.type){t.next=10;break}return t.next=7,Object(A.k)(a);case 7:n=t.sent,t.next=20;break;case 10:if("media"!==e.props.type||!e.props.mediaPath){t.next=16;break}return t.next=13,Object(A.h)(e.props.mediaPath,a);case 13:n=t.sent,t.next=20;break;case 16:if("stream"!==e.props.type||!e.props.streamPath){t.next=20;break}return t.next=19,Object(A.j)(e.props.streamPath,a);case 19:n=t.sent;case 20:r>e.state.lastResultTimestamp&&e.setState({loading:!1,results:n,lastResultTimestamp:r});case 21:case"end":return t.stop()}}),t)}))),500)),e.debounced()}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setMedia=function(t,a){window.setTimeout((function(){return e.setState({resetDropdown:Number(new Date)})}),300),e.props.setMedia(t,a)},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.setMedia,a="Search streams",n="film";return"youtube"===this.props.type?(a="Search YouTube",n="youtube"):"media"===this.props.type&&(a=this.props.mediaPath||"",n="file"),this.state.loading&&(n="loading circle notch"),r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{key:this.state.resetDropdown,fluid:!0,style:{height:"36px"},button:!0,icon:n,className:"icon",labeled:!0,disabled:this.props.disabled,search:function(){},text:a,onSearchChange:this.doSearch,onFocus:function(){var t=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"media"===e.props.type&&e.props.mediaPath&&e.doSearch(a);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Boolean(this.state.results.length)?r.a.createElement(P.a.Menu,null,this.state.results.map((function(a){return"youtube"===e.props.type?r.a.createElement(Be,Object.assign({key:a.url},a,{setMedia:t})):"media"===e.props.type?r.a.createElement(Ie,Object.assign({key:a.url},a,{setMedia:t})):r.a.createElement(Ne,Object.assign({key:a.url},a,{setMedia:t,launchMultiSelect:e.props.launchMultiSelect,streamPath:e.props.streamPath||""}))}))):null))}}]),a}(r.a.Component),Ae=a(381),ze=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={showTimestamp:!1,currTimestamp:0,posTimestamp:0},e.onMouseOver=function(){e.setState({showTimestamp:!0})},e.onMouseOut=function(){e.setState({showTimestamp:!1})},e.onMouseMove=function(t){var a=t.target.getBoundingClientRect(),n=(t.clientX-a.left)/a.width,r=n*e.props.duration;n>=0&&e.setState({currTimestamp:r,posTimestamp:n})},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.togglePlay,n=t.onSeek,i=t.fullScreen,o=t.toggleMute,s=t.toggleSubtitle,l=t.jumpToLeader,c=t.paused,u=t.muted,d=t.subtitled,m=t.currentTime,p=t.duration,h=t.leaderTime,f=h&&h-m>5;return r.a.createElement("div",{className:"controls"},r.a.createElement(T.a,{size:"large",onClick:a,className:"control action",disabled:this.props.disabled,name:c?"play":"pause"}),r.a.createElement(j.a,{content:(f?"We've detected that your stream is behind. ":"")+"Click to sync to leader.",trigger:r.a.createElement(T.a,{size:"large",onClick:l,className:"control action ".concat(f?"glowing":""),name:"angle double right"})}),r.a.createElement("div",{className:"control"},Object(A.d)(m)),r.a.createElement(D.a,{size:"tiny",color:"blue",onClick:p<1/0&&!this.props.disabled?n:void 0,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onMouseMove:this.onMouseMove,className:"control action",inverted:!0,style:{flexGrow:1,marginTop:0,marginBottom:0,position:"relative",minWidth:"100px"},value:m,total:p},p<1/0&&this.state.showTimestamp&&r.a.createElement("div",{style:{position:"absolute",bottom:"0px",left:"calc(".concat(100*this.state.posTimestamp+"% - 27px",")"),pointerEvents:"none"}},r.a.createElement(De.a,{basic:!0,color:"blue",pointing:"below"},r.a.createElement("div",{style:{width:"34px"}},Object(A.d)(this.state.currTimestamp))))),r.a.createElement("div",{className:"control"},Object(A.d)(p)),r.a.createElement(T.a,{size:"large",onClick:s,className:"control action",name:d?"closed captioning":"closed captioning outline",title:"Captions"}),r.a.createElement(T.a,{size:"large",onClick:function(){return i(!1)},className:"control action",name:"window maximize outline",title:"Theater Mode"}),r.a.createElement(T.a,{size:"large",onClick:function(){return i(!0)},className:"control action",name:"expand",title:"Fullscreen"}),r.a.createElement(T.a,{size:"large",onClick:o,className:"control action",name:u?"volume off":"volume up",title:"Mute"}),r.a.createElement("div",{style:{width:"100px",marginRight:"10px"}},r.a.createElement(Ae.Slider,{value:this.props.getVolume(),color:"blue",settings:{min:0,max:1,step:.01,onChange:function(t){e.props.setVolume(t)}}})))}}]),a}(r.a.Component),Ue=a(771),We=a(384),Ye=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STRIPE_PUBLIC_KEY?Object(We.a)(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STRIPE_PUBLIC_KEY):null,Fe=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onSubscribe=Object(p.a)(d.a.mark((function t(){var a,n,r,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Ye){t.next=3;break}return console.warn("Stripe integration is not configured, cannot subscribe"),t.abrupt("return");case 3:return t.next=5,Ye;case 5:return r=t.sent,t.next=8,null===r||void 0===r?void 0:r.redirectToCheckout({lineItems:[{price:"price_HNDBoPDI7yYRi9",quantity:1}],mode:"subscription",successUrl:window.location.href,cancelUrl:window.location.href,customerEmail:null===(a=e.props.user)||void 0===a?void 0:a.email,clientReferenceId:null===(n=e.props.user)||void 0===n?void 0:n.uid});case 8:(i=t.sent)&&i.error&&console.error(i.error.message);case 10:case"end":return t.stop()}}),t)}))),e}return Object(f.a)(a,[{key:"render",value:function(){if(this.props.isSubscriber)return this.props.closeSubscribe(),null;var e=this.props.closeSubscribe;return r.a.createElement(x.a,{open:!0,onClose:e},r.a.createElement(x.a.Header,null,"Subscribe to WatchParty Plus"),r.a.createElement(x.a.Content,{image:!0},r.a.createElement(x.a.Description,null,r.a.createElement("div",null,"Subscriptions help us maintain the service and build new features! Please consider supporting us if you're enjoying WatchParty."),r.a.createElement(Oe.a,null,"Features"),r.a.createElement(Ue.a,{definition:!0,unstackable:!0,striped:!0},r.a.createElement(Ue.a.Header,null,r.a.createElement(Ue.a.Row,null,r.a.createElement(Ue.a.HeaderCell,null),r.a.createElement(Ue.a.HeaderCell,null,"WatchParty Free"),r.a.createElement(Ue.a.HeaderCell,null,"WatchParty Plus"))),r.a.createElement(Ue.a.Body,null,r.a.createElement(Ue.a.Row,null,r.a.createElement(Ue.a.Cell,null,"Basic (Synchronized watching, chat, screenshare)"),r.a.createElement(Ue.a.Cell,null,r.a.createElement(T.a,{name:"check"})),r.a.createElement(Ue.a.Cell,null,r.a.createElement(T.a,{name:"check"}))),r.a.createElement(Ue.a.Row,null,r.a.createElement(Ue.a.Cell,null,"VBrowser Resolution"),r.a.createElement(Ue.a.Cell,null,"720p"),r.a.createElement(Ue.a.Cell,null,"1080p")),r.a.createElement(Ue.a.Row,null,r.a.createElement(Ue.a.Cell,null,"VBrowser CPU/RAM"),r.a.createElement(Ue.a.Cell,null,"Standard"),r.a.createElement(Ue.a.Cell,null,"Extra")),r.a.createElement(Ue.a.Row,null,r.a.createElement(Ue.a.Cell,null,"VBrowser Session Length"),r.a.createElement(Ue.a.Cell,null,"3 hours"),r.a.createElement(Ue.a.Cell,null,"12 hours")),r.a.createElement(Ue.a.Row,null,r.a.createElement(Ue.a.Cell,null,"Number of Permanent Rooms"),r.a.createElement(Ue.a.Cell,null,"1"),r.a.createElement(Ue.a.Cell,null,"10")),r.a.createElement(Ue.a.Row,null,r.a.createElement(Ue.a.Cell,null,"Custom Room URLs"),r.a.createElement(Ue.a.Cell,null),r.a.createElement(Ue.a.Cell,null,r.a.createElement(T.a,{name:"check"}))),r.a.createElement(Ue.a.Row,null,r.a.createElement(Ue.a.Cell,null,"Discord Subscriber Role"),r.a.createElement(Ue.a.Cell,null),r.a.createElement(Ue.a.Cell,null,r.a.createElement(T.a,{name:"check"}))),r.a.createElement(Ue.a.Row,null,r.a.createElement(Ue.a.Cell,null,"Price"),r.a.createElement(Ue.a.Cell,null,"$0 / month"),r.a.createElement(Ue.a.Cell,null,"$5 / month")))),r.a.createElement("div",{style:{textAlign:"right"}},this.props.user&&this.props.user.email?r.a.createElement(O.a,{icon:!0,labelPosition:"left",color:"blue",size:"large",onClick:this.onSubscribe},r.a.createElement(T.a,{name:"cc stripe"}),"Subscribe with Stripe"):r.a.createElement("div",null,"Please sign in to subscribe: ",r.a.createElement(ae,{user:void 0}))))))}}]),a}(r.a.Component),He=a(227),qe=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.closeModal,a=e.startVBrowser,n=e.openSubscribe,i=Object(He.b)((function(e){var n=e.googleReCaptchaProps,i=e.large;return r.a.createElement(O.a,{size:"large",color:i?"orange":void 0,onClick:Object(p.a)(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.executeRecaptcha("launchVBrowser");case 2:r=e.sent,a(r,{size:i?"large":""}),t();case 5:case"end":return e.stop()}}),e)})))},i?"Launch VBrowser+":"Continue with Free")}));return r.a.createElement(He.a,{reCaptchaKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_RECAPTCHA_SITE_KEY,useRecaptchaNet:!0},r.a.createElement(x.a,{open:!0,onClose:t},r.a.createElement(x.a.Header,null,"Launch a VBrowser"),r.a.createElement(x.a.Content,{image:!0},r.a.createElement(x.a.Description,null,r.a.createElement("div",null,"You're about to launch a virtual browser to share in this room."),r.a.createElement(Ue.a,{definition:!0,unstackable:!0,striped:!0},r.a.createElement(Ue.a.Header,null,r.a.createElement(Ue.a.Row,null,r.a.createElement(Ue.a.HeaderCell,null),r.a.createElement(Ue.a.HeaderCell,null,"WatchParty Free"),r.a.createElement(Ue.a.HeaderCell,null,"WatchParty Plus"))),r.a.createElement(Ue.a.Body,null,r.a.createElement(Ue.a.Row,null,r.a.createElement(Ue.a.Cell,null,"VBrowser Resolution"),r.a.createElement(Ue.a.Cell,null,"720p"),r.a.createElement(Ue.a.Cell,null,"1080p")),r.a.createElement(Ue.a.Row,null,r.a.createElement(Ue.a.Cell,null,"VBrowser CPU/RAM"),r.a.createElement(Ue.a.Cell,null,"Standard"),r.a.createElement(Ue.a.Cell,null,"Extra")),r.a.createElement(Ue.a.Row,null,r.a.createElement(Ue.a.Cell,null,"VBrowser Session Length"),r.a.createElement(Ue.a.Cell,null,"3 hours"),r.a.createElement(Ue.a.Cell,null,"12 hours")),r.a.createElement(Ue.a.Row,null,r.a.createElement(Ue.a.Cell,null),r.a.createElement(Ue.a.Cell,null,r.a.createElement(i,null)),r.a.createElement(Ue.a.Cell,null,this.props.isSubscriber?r.a.createElement(i,{large:!0}):r.a.createElement(O.a,{icon:!0,labelPosition:"left",size:"large",color:"orange",onClick:n},r.a.createElement(T.a,{name:"plus"}),"Subscribe")))))))))}}]),a}(r.a.Component),Ke=a(75),$e=a(764),Ge=a(760),Je=function(e){var t=e.hide,a=e.user,i=e.roomLock,o=e.setRoomLock,s=e.socket,l=e.isSubscriber,c=e.roomId,u=Object(n.useState)(0),h=Object(Ke.a)(u,2),f=h[0],g=h[1],v=Object(n.useState)(void 0),b=Object(Ke.a)(v,2),y=b[0],w=b[1],E=Object(n.useState)(void 0),S=Object(Ke.a)(E,2),x=S[0],M=S[1],j=Object(n.useState)(void 0),P=Object(Ke.a)(j,2),R=P[0],_=P[1],D=Object(n.useState)(!0),I=Object(Ke.a)(D,2),N=I[0],V=I[1],L=Object(n.useState)(!1),z=Object(Ke.a)(L,2),U=z[0],W=z[1],Y=Object(n.useState)(""),F=Object(Ke.a)(Y,2),H=F[0],q=F[1];Object(n.useEffect)((function(){if(s){s.emit("CMD:getRoomState");var e=function(e){_(e.owner),w(e.vanity),M(e.password),q(t(e.vanity))},t=function(e){return e?"".concat(window.location.origin,"/r/").concat(e):"".concat(window.location.origin).concat(c.replace("/","#"))};return s.on("REC:getRoomState",e),function(){s.off("REC:getRoomState",e)}}}),[s,c]);var K=Object(n.useCallback)(function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===a||void 0===a?void 0:a.getIdToken();case 2:n=e.sent,s.emit("CMD:setRoomState",Object(m.a)({uid:null===a||void 0===a?void 0:a.uid,token:n},t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s,a]),$=Object(n.useCallback)(function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===a||void 0===a?void 0:a.getIdToken();case 2:n=e.sent,s.emit("CMD:setRoomOwner",Object(m.a)({uid:null===a||void 0===a?void 0:a.uid,token:n},t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s,a]),G=Object(n.useCallback)(function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return V(!0),e.abrupt("return");case 3:return W(!0),e.next=6,k.a.get(A.o+"/resolveRoom/"+t);case 6:a=e.sent,n=a.data,W(!1),n&&n.vanity&&n.vanity!==y?V(!1):V(!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[V,y]),J=!Boolean(a)||Boolean(i&&i!==(null===a||void 0===a?void 0:a.uid));return r.a.createElement("div",{style:{display:t?"none":"block",color:"white"}},r.a.createElement("div",{className:"sectionHeader"},"Room Settings"),!a&&r.a.createElement(C.a,{color:"yellow",size:"tiny"},"You need to be signed in to change these settings."),r.a.createElement(Xe,{icon:i?"lock":"lock open",name:"Lock Room",description:"Only the person who locked the room can control the video.",checked:Boolean(i),disabled:J,onChange:function(e,t){return o(t.checked)}}),r.a.createElement(Xe,{icon:"clock",name:"Make Room Permanent",description:"Standard rooms are deleted after one day of inactivity. Permanent rooms aren't deleted and can have passwords/custom URLs. Free users can only have one permanent room at a time.",checked:Boolean(R),disabled:Boolean(R&&R!==(null===a||void 0===a?void 0:a.uid)),onChange:function(e,t){return $({undo:!t.checked})}}),R&&R===(null===a||void 0===a?void 0:a.uid)&&r.a.createElement("div",{className:"sectionHeader"},"Admin Settings"),R&&R===(null===a||void 0===a?void 0:a.uid)&&r.a.createElement(Xe,{icon:"key",name:"Set Room Password",description:"Users must know this password in order to join the room.",content:r.a.createElement(B.a,{value:x,onChange:function(e){return M(e.target.value)},fluid:!0}),disabled:!1}),R&&R===(null===a||void 0===a?void 0:a.uid)&&r.a.createElement(Xe,{icon:"linkify",name:"Set Custom Room URL",description:"Set a custom URL for this room. Inappropriate names may be revoked.",checked:Boolean(i),disabled:!l,subOnly:!0,content:r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{value:y,disabled:!l,onChange:function(e){G(e.target.value),w(e.target.value)},label:r.a.createElement(De.a,null,"".concat(window.location.origin,"/r/")),loading:U,fluid:!0,size:"mini",icon:!0,action:N?r.a.createElement(T.a,{name:"checkmark",color:"green"}):r.a.createElement(T.a,{name:"close",color:"red"})}),r.a.createElement(O.a,{size:"mini",fluid:!0,icon:!0,labelPosition:"left",color:"orange",title:"Copy link to clipboard",onClick:function(){navigator.clipboard.writeText(H)}},r.a.createElement(T.a,{name:"copy"}),H),r.a.createElement("p",null))}),r.a.createElement("p",null),R&&R===(null===a||void 0===a?void 0:a.uid)&&r.a.createElement(O.a,{primary:!0,disabled:!N,labelPosition:"left",icon:!0,fluid:!0,onClick:function(){return K({vanity:y,password:x})}},r.a.createElement(T.a,{name:"save"}),"Save Admin Settings"),r.a.createElement("div",{className:"sectionHeader"},"Local Settings"),r.a.createElement(Xe,{updateTS:f,icon:"bell",name:"Disable chat notification sound",description:"Don't play a sound when a chat message is sent while you're on another tab",checked:Boolean(Te().disableChatSound),disabled:!1,onChange:function(e,t){je(JSON.stringify(Object(m.a)(Object(m.a)({},Te()),{},{disableChatSound:t.checked}))),g(Number(new Date))}}))},Xe=function(e){var t=e.icon,a=e.name,n=e.description,i=e.checked,o=e.disabled,s=e.onChange,l=(e.updateTS,e.content),c=e.subOnly;return r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,{inverted:!0,horizontal:!0}),r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(T.a,{size:"large",name:t}),r.a.createElement("div",null,a," ",c?r.a.createElement(De.a,{size:"mini",color:"orange"},"Subscriber only"):null),!l&&r.a.createElement(Ge.a,{style:{marginLeft:"auto"},toggle:!0,checked:i,disabled:o,onChange:s})),r.a.createElement("div",{className:"smallText"},n),l))},Qe=function(e){var t=e.error;return r.a.createElement(x.a,{inverted:!0,basic:!0,open:!0},r.a.createElement(Oe.a,{as:"h1",style:{textAlign:"center"}},t),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(O.a,{primary:!0,size:"huge",onClick:function(){window.location.href="/"},icon:!0,labelPosition:"left"},r.a.createElement(T.a,{name:"home"}),"Go to home page")))},Ze=a(155),et=function(e){var t=e.savedPasswords,a=e.roomId,i=Object(n.useCallback)((function(){var e;window.localStorage.setItem("watchparty-passwords",JSON.stringify(Object(m.a)(Object(m.a)({},t),{},Object(Ze.a)({},a,null===(e=document.getElementById("roomPassword"))||void 0===e?void 0:e.value)))),window.location.reload()}),[t,a]);return r.a.createElement(x.a,{inverted:!0,basic:!0,open:!0},r.a.createElement(Oe.a,{as:"h1",style:{textAlign:"center"}},"This room requires a password."),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(B.a,{id:"roomPassword",type:"password",size:"large",onKeyPress:function(e){return"Enter"===e.key&&i()},icon:r.a.createElement(T.a,{onClick:i,name:"key",inverted:!0,circular:!0,link:!0})})))},tt=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_CONFIG;tt&&Q.a.initializeApp(JSON.parse(tt));var at=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={state:"starting",currentMedia:"",currentMediaPaused:!1,currentSubtitle:"",participants:[],rosterUpdateTS:Number(new Date),chat:[],tsMap:{},nameMap:{},pictureMap:{},myName:"",myPicture:"",loading:!0,scrollTimestamp:0,fullScreen:!1,controlsTimestamp:0,watchOptions:[],isScreenSharing:!1,isScreenSharingFile:!1,isVBrowser:!1,user:void 0,isYouTubeReady:!1,isAutoPlayable:!0,downloaded:0,total:0,speed:0,connections:0,multiStreamSelection:void 0,error:"",isErrorAuth:!1,settings:{},vBrowserResolution:"1280x720@30",isVBrowserLarge:!1,nonPlayableMedia:!1,currentTab:y.a.parse(window.location.search.substring(1)).tab||"chat",isSubscriber:!1,isSubscribeModalOpen:!1,isVBrowserModalOpen:!1,roomLock:"",controller:"",roomId:"",savedPasswords:{},errorMessage:"",successMessage:""},e.socket=null,e.watchPartyYTPlayer=null,e.ytDebounce=!0,e.screenShareStream=void 0,e.screenHostPC={},e.screenSharePC=void 0,e.progressUpdater=void 0,e.loadSettings=Object(p.a)(d.a.mark((function t(){var a,n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(A.o+"/settings");case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,r=Object(m.a)(Object(m.a)({},Te()),n),e.setState({settings:r});case 8:case"end":return t.stop()}}),t)}))),e.loadSignInData=Object(p.a)(d.a.mark((function t(){var a,n,r,i,o,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=e.state.user)||!e.socket){t.next=16;break}return(r=null===(n=a.displayName)||void 0===n?void 0:n.split(" ")[0])&&e.updateName(null,{value:r}),a.photoURL&&e.updatePicture(a.photoURL+"?height=128&width=128"),e.updateUid(a),t.next=8,a.getIdToken();case 8:return i=t.sent,t.next=11,window.fetch(A.o+"/metadata?uid=".concat(a.uid,"&token=").concat(i));case 11:return o=t.sent,t.next=14,o.json();case 14:s=t.sent,e.setState({isSubscriber:s.isSubscriber});case 16:case"end":return t.stop()}}),t)}))),e.loadYouTube=function(){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a),window.onYouTubeIframeAPIReady=function(){var t=new window.YT.Player("leftYt",{events:{onReady:function(){e.watchPartyYTPlayer=t,e.setState({isYouTubeReady:!0,loading:!1}),e.isYouTube()&&e.socket.emit("CMD:askHost")},onStateChange:function(t){var a,n,r,i,o,s,l,c;("youtube"===Object(A.i)(e.state.currentMedia)&&t.data===(null===(a=window.YT)||void 0===a||null===(n=a.PlayerState)||void 0===n?void 0:n.CUED)&&e.setState({loading:!1}),e.ytDebounce&&(t.data===(null===(r=window.YT)||void 0===r||null===(i=r.PlayerState)||void 0===i?void 0:i.PLAYING)&&e.state.currentMediaPaused||t.data===(null===(o=window.YT)||void 0===o||null===(s=o.PlayerState)||void 0===s?void 0:s.PAUSED)&&!e.state.currentMediaPaused))&&(e.ytDebounce=!1,t.data===(null===(l=window.YT)||void 0===l||null===(c=l.PlayerState)||void 0===c?void 0:c.PLAYING)?(e.socket.emit("CMD:play"),e.doPlay()):(e.socket.emit("CMD:pause"),e.doPause()),window.setTimeout((function(){return e.ytDebounce=!0}),500))}}})}},e.init=Object(p.a)(d.a.mark((function t(){var a,n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a="/default",(n=window.location.hash.substring(1))&&(a="/"+n),!e.props.vanity){t.next=20;break}return t.prev=4,t.next=7,k.a.get(A.o+"/resolveRoom/"+e.props.vanity);case 7:if(!(r=t.sent).data.roomId){t.next=12;break}a=r.data.roomId,t.next=13;break;case 12:throw new Error("failed to resolve room name");case 13:t.next=20;break;case 15:return t.prev=15,t.t0=t.catch(4),console.error(t.t0),e.setState({error:"There's no room with this name."}),t.abrupt("return");case 20:e.setState({roomId:a}),e.join(a);case 22:case"end":return t.stop()}}),t,null,[[4,15]])}))),e.join=function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r,i,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n="";try{r=window.localStorage.getItem("watchparty-passwords"),i=JSON.parse(r||"{}"),e.setState({savedPasswords:i}),n=i[a]||""}catch(s){console.warn("[ALERT] Could not parse saved passwords")}o=V.a.connect(A.o+a,{transports:["websocket"],query:{clientId:Object(A.e)(),password:n}}),e.socket=o,o.on("connect",Object(p.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(A.p)();case 2:a=t.sent,e.setState({isAutoPlayable:a}),e.setState({state:"connected"}),n=window.localStorage.getItem("watchparty-username"),e.updateName(null,{value:n||W()}),e.loadSignInData();case 8:case"end":return t.stop()}}),t)})))),o.on("error",(function(t){console.error(t),"Invalid namespace"===t?e.setState({error:"There's no room with this name."}):"not authorized"===t?e.setState({isErrorAuth:!0}):e.setState({error:"An error occurred."})})),o.on("errorMessage",(function(t){e.setState({errorMessage:t}),setTimeout((function(){e.setState({errorMessage:""})}),3e3)})),o.on("successMessage",(function(t){e.setState({successMessage:t}),setTimeout((function(){e.setState({successMessage:""})}),3e3)})),o.on("REC:play",(function(){e.doPlay()})),o.on("REC:pause",(function(){e.doPause()})),o.on("REC:seek",(function(t){e.doSeek(t)})),o.on("REC:subtitle",(function(t){e.setState({currentSubtitle:A.o+"/subtitle/"+t},(function(){e.isSubtitled()||e.toggleSubtitle()}))})),o.on("REC:changeController",(function(t){e.setState({controller:t})})),o.on("REC:host",(function(t){var a=t.video||"";e.isScreenShare()&&!a.startsWith("screenshare://")&&e.stopScreenShare(),e.isFileShare()&&!a.startsWith("fileshare://")&&e.stopScreenShare(),e.isScreenShare()&&a.startsWith("screenshare://")||e.isFileShare()&&a.startsWith("fileshare://")||(e.isVBrowser()&&!a.startsWith("vbrowser://")&&e.stopVBrowser(),e.setState({currentMedia:a,currentMediaPaused:t.paused,currentSubtitle:Boolean(t.subtitle)?A.o+"/subtitle/"+t.subtitle:"",loading:Boolean(t.video),nonPlayableMedia:!1,isVBrowserLarge:t.isVBrowserLarge,vBrowserResolution:t.isVBrowserLarge?"1920x1080@30":"1280x720@30",controller:t.controller},(function(){var n;if(e.state.isScreenSharingFile||e.isVBrowser()&&e.getVBrowserHost())return console.log("skipping REC:host video since fileshare is using leftVideo or this is a vbrowser"),void e.setLoadingFalse();var r=document.getElementById("leftVideo");null===r||void 0===r||r.pause(),null===(n=e.watchPartyYTPlayer)||void 0===n||n.stopVideo(),e.state.isAutoPlayable||e.setMute(!0),e.isYouTube()&&!e.watchPartyYTPlayer?console.log("YT player not ready, onReady callback will retry when it is"):e.isVBrowser()?console.log("not playing video as this is a vbrowser:// placeholder"):(e.doSrc(t.video,t.videoTS),t.paused||e.doPlay(),t.subtitle&&(e.isSubtitled()||e.toggleSubtitle()),null===r||void 0===r||r.addEventListener("canplay",(function(){e.setLoadingFalse(),e.jumpToLeader()}),{once:!0}),window.clearInterval(e.progressUpdater),e.setState({downloaded:0,total:0,speed:0}),a.includes("/stream?torrent=magnet")&&(e.progressUpdater=window.setInterval(Object(p.a)(d.a.mark((function t(){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.fetch(a.replace("/stream","/progress"));case 2:return n=t.sent,t.next=5,n.json();case 5:r=t.sent,e.setState({downloaded:r.downloaded,total:r.total,speed:r.speed,connections:r.connections});case 7:case"end":return t.stop()}}),t)}))),1e3)))})))})),o.on("REC:chat",(function(t){!Te().disableChatSound&&document.visibilityState&&"visible"!==document.visibilityState&&new Audio("/clearly.mp3").play(),e.state.chat.push(t),e.setState({chat:e.state.chat,scrollTimestamp:Number(new Date)})})),o.on("REC:tsMap",(function(t){e.setState({tsMap:t}),e.syncSubtitle()})),o.on("REC:nameMap",(function(t){e.setState({nameMap:t})})),o.on("REC:pictureMap",(function(t){e.setState({pictureMap:t})})),o.on("REC:lock",(function(t){e.setState({roomLock:t})})),o.on("roster",(function(t){e.setState({participants:t,rosterUpdateTS:Number(new Date)},(function(){e.updateScreenShare()}))})),o.on("chatinit",(function(t){e.setState({chat:t,scrollTimestamp:Number(new Date)})})),o.on("signalSS",function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r,i,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.msg,r=a.from,i=a.sharer?e.screenSharePC:e.screenHostPC[r],void 0===n.ice){t.next=7;break}i.addIceCandidate(new RTCIceCandidate(n.ice)),t.next=19;break;case 7:if(!n.sdp||"offer"!==n.sdp.type){t.next=18;break}return t.next=10,i.setRemoteDescription(new RTCSessionDescription(n.sdp));case 10:return t.next=12,i.createAnswer();case 12:return o=t.sent,t.next=15,i.setLocalDescription(o);case 15:e.sendSignalSS(r,{sdp:i.localDescription},!a.sharer),t.next=19;break;case 18:n.sdp&&"answer"===n.sdp.type&&i.setRemoteDescription(new RTCSessionDescription(n.sdp));case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),window.setInterval((function(){e.state.currentMedia&&e.socket.emit("CMD:ts",e.getCurrentTime())}),1e3);case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setupFileShare=Object(p.a)(d.a.mark((function t(){var a,n,r,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(A.n)();case 2:if(a=t.sent){t.next=5;break}return t.abrupt("return");case 5:n=a[0],(r=document.getElementById("leftVideo")).srcObject=null,r.src=URL.createObjectURL(n),r.play(),(i=r.captureStream()).onaddtrack=function(){console.log(i,i.getVideoTracks(),i.getAudioTracks()),!e.screenShareStream&&i.getVideoTracks().length&&i.getAudioTracks().length&&(i.getVideoTracks()[0].onended=e.stopScreenShare,e.screenShareStream=i,e.socket.emit("CMD:joinScreenShare",{file:!0}),e.setState({isScreenSharing:!0,isScreenSharingFile:!0}),i.onaddtrack=void 0)};case 12:case"end":return t.stop()}}),t)}))),e.setupScreenShare=Object(p.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getDisplayMedia({video:{cursor:"never",height:720,logicalSurface:!0},audio:!0});case 2:(a=t.sent).getVideoTracks()[0].onended=e.stopScreenShare,e.screenShareStream=a,e.socket.emit("CMD:joinScreenShare"),e.setState({isScreenSharing:!0});case 7:case"end":return t.stop()}}),t)}))),e.stopScreenShare=Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.screenShareStream&&e.screenShareStream.getTracks().forEach((function(e){e.stop()})),e.screenShareStream=void 0,e.screenSharePC&&(e.screenSharePC.close(),e.screenSharePC=void 0),Object.values(e.screenHostPC).forEach((function(e){e.close()})),e.screenHostPC={},e.state.isScreenSharing&&e.socket.emit("CMD:leaveScreenShare"),e.setState({isScreenSharing:!1,isScreenSharingFile:!1});case 7:case"end":return t.stop()}}),t)}))),e.updateScreenShare=Object(p.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isScreenShare()||e.isFileShare()){t.next=2;break}return t.abrupt("return");case 2:(a=e.state.participants.find((function(e){return e.isScreenShare})))&&a.id===e.socket.id&&e.state.participants.forEach((function(t){var a=t.id;if((a!==e.socket.id||!e.state.isScreenSharingFile)&&!e.screenHostPC[a]){var n=new RTCPeerConnection({iceServers:Object(A.l)()});e.screenHostPC[a]=n,n.addStream(e.screenShareStream),n.onicecandidate=function(t){t.candidate&&e.sendSignalSS(a,{ice:t.candidate},!0)},n.onnegotiationneeded=Object(p.a)(d.a.mark((function t(){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.createOffer();case 2:return r=t.sent,t.next=5,n.setLocalDescription(r);case 5:e.sendSignalSS(a,{sdp:n.localDescription},!0);case 6:case"end":return t.stop()}}),t)})))}})),!a||e.screenSharePC||e.state.isScreenSharingFile||(n=new RTCPeerConnection({iceServers:Object(A.l)()}),e.screenSharePC=n,n.onicecandidate=function(t){t.candidate&&e.sendSignalSS(a.id,{ice:t.candidate})},n.onaddstream=function(t){console.log("stream from webrtc peer");var a=t.stream,n=document.getElementById("leftVideo");n&&(n.src="",n.srcObject=a,e.state.isAutoPlayable||e.setMute(!0),n.play())});case 5:case"end":return t.stop()}}),t)}))),e.setupVBrowser=function(){var t=Object(p.a)(d.a.mark((function t(a,n){var r,i,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.user,i=null===r||void 0===r?void 0:r.uid,t.next=4,null===r||void 0===r?void 0:r.getIdToken();case 4:o=t.sent,e.socket.emit("CMD:startVBrowser",{options:n,uid:i,token:o,rcToken:a});case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.stopVBrowser=Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.socket.emit("CMD:stopVBrowser");case 1:case"end":return t.stop()}}),t)}))),e.changeController=function(){var t=Object(p.a)(d.a.mark((function t(a,n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.socket.emit("CMD:changeController",n.value);case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.setSubtitle=Object(p.a)(d.a.mark((function t(){var a,n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(A.n)(".srt");case 2:if(a=t.sent){t.next=5;break}return t.abrupt("return");case 5:n=a[0],(r=new FileReader).addEventListener("load",(function(t){var a,n=null===(a=t.target)||void 0===a?void 0:a.result;e.socket.emit("CMD:subtitle",n)})),r.readAsText(n);case 9:case"end":return t.stop()}}),t)}))),e.sendSignalSS=function(){var t=Object(p.a)(d.a.mark((function t(a,n,r){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.socket.emit("signalSS",{to:a,msg:n,sharer:r});case 1:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),e.isYouTube=function(){return"youtube"===Object(A.i)(e.state.currentMedia)},e.isVideo=function(){return"video"===Object(A.i)(e.state.currentMedia)},e.isScreenShare=function(){return e.state.currentMedia.startsWith("screenshare://")},e.isFileShare=function(){return e.state.currentMedia.startsWith("fileshare://")},e.isVBrowser=function(){return e.state.currentMedia.startsWith("vbrowser://")},e.isHttp=function(){return e.state.currentMedia.startsWith("http")},e.getVBrowserPass=function(){return e.state.currentMedia.replace("vbrowser://","").split("@")[0]},e.getVBrowserHost=function(){return e.state.currentMedia.replace("vbrowser://","").split("@")[1]},e.getCurrentTime=function(){if(e.isVideo()){var t=document.getElementById("leftVideo");return null===t||void 0===t?void 0:t.currentTime}var a;if(e.isYouTube())return null===(a=e.watchPartyYTPlayer)||void 0===a?void 0:a.getCurrentTime()},e.getDuration=function(){var t;return e.isVideo()?document.getElementById("leftVideo").duration:e.isYouTube()?null===(t=e.watchPartyYTPlayer)||void 0===t?void 0:t.getDuration():0},e.isPaused=function(){if(e.isVideo()){var t=document.getElementById("leftVideo");return t.paused||t.ended}var a,n,r,i,o,s;return!!e.isYouTube()&&((null===(a=e.watchPartyYTPlayer)||void 0===a?void 0:a.getPlayerState())===(null===(n=window.YT)||void 0===n||null===(r=n.PlayerState)||void 0===r?void 0:r.PAUSED)||(null===(i=e.watchPartyYTPlayer)||void 0===i?void 0:i.getPlayerState())===(null===(o=window.YT)||void 0===o||null===(s=o.PlayerState)||void 0===s?void 0:s.ENDED))},e.isMuted=function(){if(e.isVideo()){var t=document.getElementById("leftVideo");return null===t||void 0===t?void 0:t.muted}var a;return!!e.isYouTube()&&(null===(a=e.watchPartyYTPlayer)||void 0===a?void 0:a.isMuted())},e.isSubtitled=function(){if(e.isVideo()){var t=document.getElementById("leftVideo");return t.textTracks[0]&&"showing"===t.textTracks[0].mode}if(e.isYouTube())try{var a,n=null===(a=e.watchPartyYTPlayer)||void 0===a?void 0:a.getOption("captions","track");return Boolean(n&&n.languageCode)}catch(r){return console.warn(r),!1}return!1},e.jumpToLeader=function(){var t=e.getLeaderTime();t>0&&(console.log("jump to leader at ",t),e.doSeek(t))},e.doSrc=function(){var t=Object(p.a)(d.a.mark((function t(a,n){var r,i,o,s,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("doSrc",a,n),!(e.isScreenShare()||e.isFileShare()||e.isVBrowser())){t.next=3;break}return t.abrupt("return");case 3:e.isVideo()&&(r=document.getElementById("leftVideo"))&&(r.srcObject=null,r.src=a,r.currentTime=n,r.innerHTML=""),e.isYouTube()&&(o=new window.URL(a),s=y.a.parse(o.search.substring(1)).v,l=a.split("/").slice(-1)[0],null===(i=e.watchPartyYTPlayer)||void 0===i||i.cueVideoById(s||l,n));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.doPlay=Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({currentMediaPaused:!1},Object(p.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isVideo()){t.next=11;break}return a=document.getElementById("leftVideo"),t.prev=2,t.next=5,null===a||void 0===a?void 0:a.play();case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(2),console.warn(t.t0.name),"NotSupportedError"===t.t0.name&&e.setState({loading:!1,nonPlayableMedia:!0});case 11:e.isYouTube()&&(console.log("play yt"),null===(n=e.watchPartyYTPlayer)||void 0===n||n.playVideo());case 12:case"end":return t.stop()}}),t,null,[[2,7]])}))));case 1:case"end":return t.stop()}}),t)}))),e.doPause=function(){e.setState({currentMediaPaused:!0},Object(p.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.isVideo()&&document.getElementById("leftVideo").pause(),e.isYouTube()&&(console.log("pause"),null===(a=e.watchPartyYTPlayer)||void 0===a||a.pauseVideo());case 2:case"end":return t.stop()}}),t)}))))},e.doSeek=function(t){var a;e.isVideo()&&(document.getElementById("leftVideo").currentTime=t);e.isYouTube()&&(null===(a=e.watchPartyYTPlayer)||void 0===a||a.seekTo(t,!0))},e.togglePlay=function(){var t=!0;if(e.isVideo()){var a=document.getElementById("leftVideo");t=a.paused||a.ended}else if(e.isYouTube()){var n,r;t=(null===(n=e.watchPartyYTPlayer)||void 0===n?void 0:n.getPlayerState())===(null===(r=window.YT)||void 0===r?void 0:r.PlayerState.PAUSED)||e.getCurrentTime()===e.getDuration()}t?(e.socket.emit("CMD:play"),e.doPlay()):(e.socket.emit("CMD:pause"),e.doPause())},e.onSeek=function(t,a){var n=a;if(t){var r=t.target.getBoundingClientRect();n=(t.clientX-r.left)/r.width*e.getDuration()}n=Math.max(n,0),e.doSeek(n),e.socket.emit("CMD:seek",n)},e.onVideoKeydown=function(t){" "===t.key?(t.preventDefault(),e.togglePlay()):"ArrowRight"===t.key?e.onSeek(null,e.getCurrentTime()+10):"ArrowLeft"===t.key?e.onSeek(null,e.getCurrentTime()-10):"c"===t.key?e.toggleSubtitle():"t"===t.key?e.fullScreen(!1):"f"===t.key?e.fullScreen(!0):"m"===t.key&&e.toggleMute()},e.fullScreen=function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=document.getElementById("fullScreenContainer"),(a||Object(A.m)())&&(n=document.getElementById(e.isYouTube()?"leftYt":"leftVideo")),document.fullscreenElement){t.next=6;break}return t.next=5,n.requestFullscreen();case 5:return t.abrupt("return");case 6:return r=document.fullscreenElement!==n,t.next=9,document.exitFullscreen();case 9:if(!r){t.next=12;break}return t.next=12,n.requestFullscreen();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleMute=function(){e.setMute(!e.isMuted())},e.setMute=function(t){if(e.isVideo()){var a=document.getElementById("leftVideo");a&&(a.muted=t)}var n,r;e.isYouTube()&&(t?null===(n=e.watchPartyYTPlayer)||void 0===n||n.mute():null===(r=e.watchPartyYTPlayer)||void 0===r||r.unMute())},e.setVolume=function(t){var a;e.isVideo()&&(document.getElementById("leftVideo").volume=t);e.isYouTube()&&(null===(a=e.watchPartyYTPlayer)||void 0===a||a.setVolume(100*t))},e.getVolume=function(){var t;return e.isVideo()?document.getElementById("leftVideo").volume:e.isYouTube()?(null===(t=e.watchPartyYTPlayer)||void 0===t?void 0:t.getVolume())/100:void 0},e.loadSubtitles=Object(p.a)(d.a.mark((function t(){var a,n,r,i,o,s,l,c,u;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=document.getElementById("leftVideo")).innerHTML="",n="",r=e.state.currentMedia,e.state.currentSubtitle?n=e.state.currentSubtitle:r.includes("/stream?torrent=magnet")?n=r.replace("/stream","/subtitles2"):r.startsWith("http")&&(i=r.slice(0,r.lastIndexOf("/")+1),n=i+"subtitles/"+e.getFileName(r)+".srt"),!n){t.next=23;break}return t.next=8,window.fetch(n);case 8:return o=t.sent,t.next=11,o.arrayBuffer();case 11:return s=t.sent,l=new L.a(new Blob([s])),t.next=15,l.getURL();case 15:c=t.sent,(u=document.createElement("track")).kind="captions",u.label="English",u.srclang="en",u.src=c,a.appendChild(u),a.textTracks[0].mode="showing";case 23:case"end":return t.stop()}}),t)}))),e.syncSubtitle=function(){var t=e.state.participants.find((function(e){return e.isScreenShare}));if(t&&t.id!==e.socket.id){var a=document.getElementById("leftVideo"),n=null===a||void 0===a?void 0:a.textTracks[0],r=a.currentTime-e.state.tsMap[t.id];if(n&&r&&n.cues)for(var i=0;i<n.cues.length;i++){var o=n.cues[i];o.origStart||(o.origStart=o.startTime,o.origEnd=o.endTime),o.startTime=o.origStart+r,o.endTime=o.origEnd+r}}},e.toggleSubtitle=function(){if(e.isVideo()){var t=document.getElementById("leftVideo");e.isSubtitled()?t.innerHTML="":e.loadSubtitles()}if(e.isYouTube())if(e.isSubtitled()){var a;null===(a=e.watchPartyYTPlayer)||void 0===a||a.setOption("captions","track",{})}else{var n,r,i;null===(n=e.watchPartyYTPlayer)||void 0===n||n.setOption("captions","reload",!0);var o=null===(r=e.watchPartyYTPlayer)||void 0===r?void 0:r.getOption("captions","tracklist");null===(i=e.watchPartyYTPlayer)||void 0===i||i.setOption("captions","track",o[0])}},e.setMedia=function(t,a){e.socket.emit("CMD:host",a.value)},e.launchMultiSelect=function(t){e.setState({multiStreamSelection:t})},e.resetMultiSelect=function(){e.setState({multiStreamSelection:void 0})},e.updateName=function(t,a){e.setState({myName:a.value}),e.socket.emit("CMD:name",a.value),window.localStorage.setItem("watchparty-username",a.value)},e.updatePicture=function(t){e.setState({myPicture:t}),e.socket.emit("CMD:picture",t)},e.updateUid=function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.uid,t.next=3,a.getIdToken();case 3:r=t.sent,e.socket.emit("CMD:uid",{uid:n,token:r});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getMediaDisplayName=function(t){if(!t)return"";if("youtube"===Object(A.i)(t))return t;if(t.startsWith("screenshare://")){var a=t.slice("screenshare://".length);return e.state.nameMap[a]+"'s screen"}if(t.startsWith("fileshare://")){var n=t.slice("fileshare://".length);return e.state.nameMap[n]+"'s file"}if(t.startsWith("vbrowser://"))return"Virtual Browser"+(e.state.isVBrowserLarge?"+":"");if(t.includes("/stream?torrent=magnet")){var r=new URL(t).search,i=y.a.parse(r.substring(1)).torrent;return S.a.decode(i).name}return t},e.getFileName=function(e){return e.split("/").slice(-1)[0]},e.setLoadingFalse=function(){e.setState({loading:!1})},e.onManage=Object(p.a)(d.a.mark((function t(){var a,n,r,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=window,t.t1=A.o+"/manageSub",t.t2={"Content-Type":"application/json"},t.t3=JSON,t.t4=null===(a=e.state.user)||void 0===a?void 0:a.uid,t.next=7,null===(n=e.state.user)||void 0===n?void 0:n.getIdToken();case 7:return t.t5=t.sent,t.t6=window.location.href,t.t7={uid:t.t4,token:t.t5,return_url:t.t6},t.t8=t.t3.stringify.call(t.t3,t.t7),t.t9={method:"POST",headers:t.t2,body:t.t8},t.next=14,t.t0.fetch.call(t.t0,t.t1,t.t9);case 14:return r=t.sent,t.next=17,r.json();case 17:i=t.sent,console.log(i),window.location.assign(i.url);case 20:case"end":return t.stop()}}),t)}))),e.setRoomLock=function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r,i,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=null===(n=e.state.user)||void 0===n?void 0:n.uid,t.next=3,null===(r=e.state.user)||void 0===r?void 0:r.getIdToken();case 3:o=t.sent,e.socket.emit("CMD:lock",{uid:i,token:o,locked:a});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.haveLock=function(){var t;return!e.state.roomLock||(null===(t=e.state.user)||void 0===t?void 0:t.uid)===e.state.roomLock},e.getLeaderTime=function(){return Math.max.apply(Math,Object(c.a)(Object.values(e.state.tsMap)))},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.onfullscreenchange=function(){t.setState({fullScreen:Boolean(document.fullscreenElement)})},window.setInterval((function(){window.fetch(A.o+"/ping")}),6e5),tt&&Q.a.auth().onAuthStateChanged(function(){var e=Object(p.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a&&t.setState({user:a},Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.loadSignInData();case 1:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.loadSettings(),this.loadYouTube(),this.init();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,a=this.state.participants.find((function(e){return e.isScreenShare})),n=r.a.createElement(ze,{key:this.state.controlsTimestamp,togglePlay:this.togglePlay,onSeek:this.onSeek,fullScreen:this.fullScreen,toggleMute:this.toggleMute,toggleSubtitle:this.toggleSubtitle,setVolume:this.setVolume,getVolume:this.getVolume,jumpToLeader:this.jumpToLeader,paused:this.isPaused(),muted:this.isMuted(),subtitled:this.isSubtitled(),currentTime:this.getCurrentTime(),duration:this.getDuration(),disabled:!this.haveLock(),leaderTime:this.isHttp()?this.getLeaderTime():void 0});return r.a.createElement(r.a.Fragment,null,this.state.multiStreamSelection&&r.a.createElement(Re,{streams:this.state.multiStreamSelection,setMedia:this.setMedia,resetMultiSelect:this.resetMultiSelect}),this.state.isSubscribeModalOpen&&r.a.createElement(Fe,{user:this.state.user,isSubscriber:this.state.isSubscriber,closeSubscribe:function(){return t.setState({isSubscribeModalOpen:!1})}}),this.state.isVBrowserModalOpen&&r.a.createElement(qe,{isSubscriber:this.state.isSubscriber,closeModal:function(){return t.setState({isVBrowserModalOpen:!1})},openSubscribe:function(){return t.setState({isSubscribeModalOpen:!0})},startVBrowser:this.setupVBrowser}),this.state.error&&r.a.createElement(Qe,{error:this.state.error}),this.state.isErrorAuth&&r.a.createElement(et,{savedPasswords:this.state.savedPasswords,roomId:this.state.roomId}),this.state.errorMessage&&r.a.createElement(C.a,{negative:!0,header:"Error",content:this.state.errorMessage,style:{position:"fixed",bottom:"10px",right:"10px"}}),this.state.successMessage&&r.a.createElement(C.a,{positive:!0,header:"Success",content:this.state.successMessage,style:{position:"fixed",bottom:"10px",right:"10px"}}),!this.state.error&&!this.state.isAutoPlayable&&r.a.createElement(x.a,{inverted:!0,basic:!0,open:!0},r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(O.a,{primary:!0,size:"huge",onClick:function(){t.setState({isAutoPlayable:!0}),t.setMute(!1)},icon:!0,labelPosition:"left"},r.a.createElement(T.a,{name:"sign-in"}),"Join Party"))),r.a.createElement(re,{user:this.state.user}),r.a.createElement(M.a,{stackable:!0,celled:"internally"},r.a.createElement(M.a.Row,null,r.a.createElement(M.a.Column,{width:12,className:"fullHeightColumn"},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},r.a.createElement(Ve,{setMedia:this.setMedia,currentMedia:this.state.currentMedia,getMediaDisplayName:this.getMediaDisplayName,launchMultiSelect:this.launchMultiSelect,streamPath:this.state.settings.streamPath,mediaPath:this.state.settings.mediaPath,disabled:!this.haveLock()}),r.a.createElement(nt,null),r.a.createElement("div",{className:"mobileStack",style:{display:"flex"}},this.screenShareStream&&r.a.createElement(O.a,{fluid:!0,className:"toolButton",icon:!0,labelPosition:"left",color:"red",onClick:this.stopScreenShare,disabled:(null===a||void 0===a?void 0:a.id)!==(null===(e=this.socket)||void 0===e?void 0:e.id)},r.a.createElement(T.a,{name:"cancel"}),"Stop Share"),!this.screenShareStream&&!a&&!this.isVBrowser()&&r.a.createElement(j.a,{content:'Share a tab or an application. Make sure to check "Share audio" for best results.',trigger:r.a.createElement(O.a,{fluid:!0,className:"toolButton",disabled:!this.haveLock(),icon:!0,labelPosition:"left",color:"instagram",onClick:this.setupScreenShare},r.a.createElement(T.a,{name:"slideshare"}),"Screenshare")}),!this.screenShareStream&&!a&&!this.isVBrowser()&&r.a.createElement(j.a,{content:"Launch a shared virtual browser",trigger:r.a.createElement(O.a,{fluid:!0,className:"toolButton",disabled:!this.haveLock(),icon:!0,labelPosition:"left",color:"green",onClick:function(){t.setState({isVBrowserModalOpen:!0})}},r.a.createElement(T.a,{name:"desktop"}),"VBrowser")}),this.isVBrowser()&&r.a.createElement(j.a,{content:"Choose the person controlling the VBrowser",trigger:r.a.createElement(P.a,{icon:"keyboard",labeled:!0,className:"icon",style:{height:"36px"},button:!0,value:this.state.controller,placeholder:"No controller",onChange:this.changeController,selection:!0,disabled:!this.haveLock(),options:this.state.participants.map((function(e){return{text:t.state.nameMap[e.id]||e.id,value:e.id}}))})}),this.isVBrowser()&&r.a.createElement(P.a,{icon:"desktop",labeled:!0,className:"icon",style:{height:"36px"},button:!0,disabled:!this.haveLock(),value:this.state.vBrowserResolution,onChange:function(e,a){return t.setState({vBrowserResolution:a.value})},selection:!0,options:[{text:"1080p",value:"1920x1080@30",disabled:!this.state.isVBrowserLarge},{text:"720p",value:"1280x720@30"},{text:"576p",value:"1024x576@60"},{text:"486p",value:"864x486@60"},{text:"360p",value:"640x360@60"}]}),this.isVBrowser()&&r.a.createElement(O.a,{fluid:!0,className:"toolButton",icon:!0,labelPosition:"left",color:"red",disabled:!this.haveLock(),onClick:this.stopVBrowser},r.a.createElement(T.a,{name:"cancel"}),"Stop VBrowser"),!this.screenShareStream&&!a&&!this.isVBrowser()&&r.a.createElement(j.a,{content:"Stream your own video file",trigger:r.a.createElement(O.a,{fluid:!0,className:"toolButton",disabled:!this.haveLock(),icon:!0,labelPosition:"left",onClick:this.setupFileShare},r.a.createElement(T.a,{name:"file"}),"File")}),!1,Boolean(this.state.settings.mediaPath)&&r.a.createElement(Le,{setMedia:this.setMedia,type:"media",streamPath:this.state.settings.streamPath,mediaPath:this.state.settings.mediaPath,disabled:!this.haveLock()}),Boolean(this.state.settings.streamPath)&&r.a.createElement(Le,{setMedia:this.setMedia,type:"stream",streamPath:this.state.settings.streamPath,mediaPath:this.state.settings.mediaPath,launchMultiSelect:this.launchMultiSelect,disabled:!this.haveLock()}),this.state.currentMedia&&r.a.createElement(j.a,{content:"Upload a .srt subtitle file for this video",trigger:r.a.createElement(O.a,{fluid:!0,color:"violet",className:"toolButton",icon:!0,labelPosition:"left",onClick:this.setSubtitle,disabled:!this.haveLock()},r.a.createElement(T.a,{name:"closed captioning"}),"Subtitle")}),!this.state.isSubscriber&&r.a.createElement(j.a,{content:"Subscribe to help support us and enable additional features!",trigger:r.a.createElement(O.a,{fluid:!0,color:"orange",className:"toolButton",icon:!0,labelPosition:"left",onClick:function(){return t.setState({isSubscribeModalOpen:!0})}},r.a.createElement(T.a,{name:"plus"}),"Subscribe")}),this.state.isSubscriber&&r.a.createElement(j.a,{content:"Manage your subscription",trigger:r.a.createElement(O.a,{fluid:!0,color:"orange",className:"toolButton",icon:!0,labelPosition:"left",onClick:this.onManage},r.a.createElement(T.a,{name:"wrench"}),"Manage")})),r.a.createElement(nt,null),r.a.createElement("div",{id:"fullScreenContainer",className:this.state.fullScreen?"fullScreenContainer":"",style:{flexGrow:1}},r.a.createElement("div",{id:"playerContainer",tabIndex:1,onKeyDown:this.onVideoKeydown},(this.state.loading||!this.state.currentMedia||this.state.nonPlayableMedia)&&r.a.createElement("div",{id:"loader",className:"videoContent",style:{display:"flex",alignItems:"center",justifyContent:"center"}},this.state.loading&&r.a.createElement(R.a,{active:!0},r.a.createElement(_.a,null,this.isVBrowser()?"Launching virtual browser. This can take up to a minute.":"")),!this.state.loading&&!this.state.currentMedia&&r.a.createElement(C.a,{color:"yellow",icon:"hand point up",header:"You're not watching anything!",content:"Pick something to watch above."}),!this.state.loading&&this.state.nonPlayableMedia&&r.a.createElement(C.a,{color:"red",icon:"frown",header:"It doesn't look like this is a media file!",content:"Maybe you meant to launch a VBrowser if you're trying to visit a web page?"})),r.a.createElement("iframe",{style:{display:this.isYouTube()&&!this.state.loading?"block":"none"},title:"YouTube",id:"leftYt",className:"videoContent",allowFullScreen:!0,frameBorder:"0",allow:"autoplay",src:"https://www.youtube.com/embed/?enablejsapi=1&controls=0&rel=0"}),this.isVBrowser()&&this.getVBrowserPass()&&this.getVBrowserHost()?r.a.createElement(Se,{username:this.socket.id,password:this.getVBrowserPass(),hostname:this.getVBrowserHost(),controlling:this.state.controller===this.socket.id,setLoadingFalse:this.setLoadingFalse,resolution:this.state.vBrowserResolution,isAutoPlayable:this.state.isAutoPlayable,setResolution:function(e){return t.setState({vBrowserResolution:e})}}):r.a.createElement("video",{style:{display:this.isVideo()&&!this.state.loading?"block":"none",width:"100%"},id:"leftVideo"}),this.state.fullScreen&&this.state.currentMedia&&r.a.createElement("div",{className:"controlsContainer"},n)),this.state.fullScreen&&r.a.createElement(K,{className:"fullScreenChat",chat:this.state.chat,nameMap:this.state.nameMap,pictureMap:this.state.pictureMap,socket:this.socket,scrollTimestamp:this.state.scrollTimestamp,getMediaDisplayName:this.getMediaDisplayName})),this.state.currentMedia&&n,Boolean(this.state.total)&&r.a.createElement("div",null,r.a.createElement(D.a,{size:"tiny",color:"green",inverted:!0,value:this.state.downloaded,total:this.state.total,label:Math.min(this.state.downloaded/this.state.total*100,100).toFixed(2)+"% - "+Object(A.c)(this.state.speed)+" - "+this.state.connections+" connections"})))),r.a.createElement(M.a.Column,{width:4,style:{display:"flex",flexDirection:"column"},className:"fullHeightColumn"},r.a.createElement(B.a,{inverted:!0,fluid:!0,label:"Name:",value:this.state.myName,onChange:this.updateName,icon:r.a.createElement(T.a,{onClick:function(){return t.updateName(null,{value:W()})},name:"refresh",inverted:!0,circular:!0,link:!0})}),!this.state.fullScreen&&r.a.createElement(I.a,{inverted:!0,widths:3,style:{marginTop:"4px",marginBottom:"4px"}},r.a.createElement(I.a.Item,{name:"chat",active:"chat"===this.state.currentTab,onClick:function(){return t.setState({currentTab:"chat"})},as:"a"},"Chat"),r.a.createElement(I.a.Item,{name:"people",active:"people"===this.state.currentTab,onClick:function(){return t.setState({currentTab:"people"})},as:"a"},"Webcam (",this.state.participants.length,")")),r.a.createElement(K,{chat:this.state.chat,nameMap:this.state.nameMap,pictureMap:this.state.pictureMap,socket:this.socket,scrollTimestamp:this.state.scrollTimestamp,getMediaDisplayName:this.getMediaDisplayName,hide:"chat"!==this.state.currentTab}),"connected"===this.state.state&&r.a.createElement(xe,{socket:this.socket,participants:this.state.participants,nameMap:this.state.nameMap,pictureMap:this.state.pictureMap,tsMap:this.state.tsMap,rosterUpdateTS:this.state.rosterUpdateTS,hide:"people"!==this.state.currentTab}),r.a.createElement(Je,{hide:"settings"!==this.state.currentTab,user:this.state.user,roomLock:this.state.roomLock,setRoomLock:this.setRoomLock,socket:this.socket,isSubscriber:this.state.isSubscriber,roomId:this.state.roomId})))))}}]),a}(r.a.Component),nt=function(){return r.a.createElement("div",{style:{height:"4px",flexShrink:0}})},rt=a(773),it=a(43),ot=a.n(it),st=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:ot.a.container},r.a.createElement(ct,{heroText:"Watch videos in-sync with friends far away.",subText:"No registration or download required.",action:r.a.createElement("div",{style:{marginTop:"8px",width:"160px"}},r.a.createElement(te,null)),image:"/screenshot4.png"}),r.a.createElement($e.a,{horizontal:!0},r.a.createElement(Oe.a,{inverted:!0,as:"h4"},r.a.createElement(T.a,{name:"film"}),"Multiple ways to watch")),r.a.createElement("div",{className:ot.a.featureSection},r.a.createElement(lt,{icon:"slideshare",title:"Screensharing",text:"Share a browser tab or an application."}),r.a.createElement(lt,{icon:"desktop",title:"VBrowser",text:"Launch a virtual browser in the cloud that all room members can view and control. No need to worry about slow upload speeds!"}),r.a.createElement(lt,{icon:"file",title:"File",text:"Upload and stream your own file."}),r.a.createElement(lt,{icon:"linkify",title:"URL",text:"Paste in a URL for everyone to watch from."}),r.a.createElement(lt,{icon:"youtube",title:"YouTube",text:"Watch videos in-sync from YouTube."})),r.a.createElement(ct,{heroText:"React to moments together.",subText:"Find moments of shared joy even when you're apart.",image:"/screenshot18.png",color:"green"}),r.a.createElement($e.a,{horizontal:!0},r.a.createElement(Oe.a,{inverted:!0,as:"h4"},r.a.createElement(T.a,{name:"cogs"}),"Features")),r.a.createElement("div",{className:ot.a.featureSection},r.a.createElement(lt,{icon:"sync",title:"Synchronized",text:"Starts, stops, and seeks are synchronized to everyone, so take those restroom and snack breaks without worrying about falling behind."}),r.a.createElement(lt,{icon:"conversation",title:"Chat",text:"Chat with others in your room. Memes and inside jokes encouraged."}),r.a.createElement(lt,{icon:"video",title:"Video chat",text:"Jump into video chat if there's something that you just can't express with text."})),r.a.createElement(ct,{heroText:"Theater mode.",subText:"Bring video and chat front-and-center for minimal distractions.",image:"/screenshot14.png"}),r.a.createElement($e.a,{horizontal:!0}),r.a.createElement("div",{style:{padding:"30px",display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement("div",{className:ot.a.heroText},"Get started!"),r.a.createElement("div",{className:ot.a.featureSection},r.a.createElement(rt.a.Group,{style:{margin:"8px"}},r.a.createElement(rt.a,null,r.a.createElement(T.a,{name:"certificate"}),r.a.createElement(rt.a.Content,null,r.a.createElement(rt.a.Title,null,"1."),r.a.createElement(rt.a.Description,null,"Make a room"))),r.a.createElement(rt.a,null,r.a.createElement(T.a,{name:"group"}),r.a.createElement(rt.a.Content,null,r.a.createElement(rt.a.Title,null,"2."),r.a.createElement(rt.a.Description,null,"Share link with friends"))),r.a.createElement(rt.a,null,r.a.createElement(T.a,{name:"film"}),r.a.createElement(rt.a.Content,null,r.a.createElement(rt.a.Title,null,"3."),r.a.createElement(rt.a.Description,null,"Pick something to watch"))),r.a.createElement(rt.a,null,r.a.createElement(T.a,{name:"thumbs up outline"}),r.a.createElement(rt.a.Content,null,r.a.createElement(rt.a.Title,null,"4."),r.a.createElement(rt.a.Description,null,"Success!"))))),r.a.createElement("div",{style:{width:"160px"}},r.a.createElement(te,null)))))},lt=function(e){var t=e.icon,a=e.text,n=e.title;return r.a.createElement("div",{style:{display:"flex",flex:"1 1 0px",flexDirection:"column",alignItems:"center",padding:"10px",minWidth:"180px"}},r.a.createElement(T.a,{fitted:!0,size:"huge",name:t}),r.a.createElement("h4",{className:ot.a.featureTitle},n),r.a.createElement("div",{className:ot.a.featureText},a))},ct=function(e){var t=e.heroText,a=e.subText,n=e.action,i=e.image,o=e.color;return r.a.createElement("div",{className:"".concat(ot.a.hero," ").concat("green"===o?ot.a.green:"")},r.a.createElement("div",{className:ot.a.heroInner},r.a.createElement("div",{style:{padding:"30px",flex:"1 1 0"}},r.a.createElement("div",{className:ot.a.heroText},t),r.a.createElement("div",{className:ot.a.subText},a),n),r.a.createElement("div",{style:{flex:"1 1 0"}},r.a.createElement("img",{alt:"hero",style:{width:"100%",borderRadius:"10px"},src:i}))))},ut=a(159),dt=a.n(ut),mt={color:"white",margin:"50px",maxWidth:"800px"},pt=function(){return r.a.createElement("div",{style:mt},r.a.createElement(dt.a,null,"\nPrivacy Policy\n====\n- Rooms are temporary and expire after one day of inactivity.\n- We do not keep logs of the content that users watch.\n\nPersonal Information\n----\n- You are not required to register to use the service, but you have the option to sign in with an email or authentication provider, which will be used to display your name and picture in the rooms you join.\n- If you provide this information, we may use it to contact you regarding your use of the service, or to link your account to a subscription.\n- We do not sell personal information to third parties.\n- You have the right to request deletion of your user data, in accordance with various laws governing data protection.\n- Payment information is handled by providers such as Stripe. We do not collect or access financial information directly.\n\nCookies\n----\n- We use services such as Google Analytics to measure usage. These services may set cookies or other information locally on your device.\n\nVirtual Browsers\n----\n- Virtual machines are recycled after each session ends and any data on them is destroyed.\n- Your commands are encrypted while in-transit to the virtual machine.\n"))},ht=function(){return r.a.createElement("div",{style:mt},r.a.createElement(dt.a,null,"\nTerms of Service\n====\nBy using this service you agree to the following terms:\n- You are over 13 years of age\n- Your use of the service may be terminated if you are found to be sharing illegal or infringing content\n- The service provides no guarantee of uptime or availability\n- You use the service at your own risk of encountering objectionable content, as we do not actively moderate rooms unless content is found to be illegal or infringing\n"))},ft=function(){return r.a.createElement("div",{style:mt},r.a.createElement(dt.a,null,"\nFAQ\n====\nWhat's a VBrowser?\n----\nA virtual browser (VBrowser) is a browser running in the cloud that a room's members can connect to. Everyone in the room sees the same thing, so it's a great way to watch videos or collaborate on tasks together.\n\nWhy did my VBrowser session stop?\n----\nVBrowsers will terminate automatically if no one is in the room for a while.\nVBrowser sessions are also limited to a maximum of 3 hours for free users, and 12 hours for subscribers.\n\nDoes everyone in the room need to be a subscriber to get the benefits?\n----\nNo, only the person who created the VBrowser needs to be.\n\nHow do I access sites that have a \"not available\" message in the VBrowser?\n----\nSome sites may block traffic that's detected as coming from certain geographic regions. You may need to install an extension like Hola VPN inside the virtual browser.\n\nHow come I'm not getting any audio when screensharing?\n----\nTo share audio, you must be using Chrome, and check a small checkbox at the bottom-left of the share screen dialog.\n\nIs there a limit to how many people can be in a room?\n----\nCurrently there isn't a hard limit, although the service hasn't been tested with more than 15 people or so. Screensharing and filesharing rely on one person uploading to everyone else, so it may not work well with large room sizes.\n"))},gt=function(){return r.a.createElement("div",{style:{margin:"1em",fontSize:"14px",color:"white"}},r.a.createElement(s.b,{style:{color:"white"},to:"/terms"},"Terms")," \xb7 ",r.a.createElement(s.b,{style:{color:"white"},to:"/privacy"},"Privacy")," \xb7 ",r.a.createElement(s.b,{style:{color:"white"},to:"/faq"},"FAQ"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var vt=Object(n.lazy)((function(){return Promise.all([a.e(3),a.e(4)]).then(a.bind(null,943))}));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.a,null,r.a.createElement(l.a,{path:"/",exact:!0,render:function(e){var t;return(null===(t=e.location)||void 0===t?void 0:t.hash)?r.a.createElement(at,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(re,{hideNewRoom:!0,hideSignin:!0}),r.a.createElement(st,null),r.a.createElement(gt,null))}}),r.a.createElement(l.a,{path:"/r/:vanity",exact:!0,render:function(e){return r.a.createElement(at,{vanity:e.match.params.vanity})}}),r.a.createElement(l.a,{path:"/terms"},r.a.createElement(re,{hideNewRoom:!0,hideSignin:!0}),r.a.createElement(ht,null),r.a.createElement(gt,null)),r.a.createElement(l.a,{path:"/privacy"},r.a.createElement(re,{hideNewRoom:!0,hideSignin:!0}),r.a.createElement(pt,null),r.a.createElement(gt,null)),r.a.createElement(l.a,{path:"/faq"},r.a.createElement(re,{hideNewRoom:!0,hideSignin:!0}),r.a.createElement(ft,null),r.a.createElement(gt,null)),r.a.createElement(l.a,{path:"/debug"},r.a.createElement(re,{hideNewRoom:!0,hideSignin:!0}),r.a.createElement(n.Suspense,{fallback:null},r.a.createElement(vt,null)),r.a.createElement(gt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[402,1,2]]]);
//# sourceMappingURL=main.42622697.chunk.js.map